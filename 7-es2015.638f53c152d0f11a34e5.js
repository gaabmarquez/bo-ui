(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{iaky:function(e,t,n){"use strict";n.r(t),n.d(t,"ProjectsModule",(function(){return ze}));var c=n("PCNd"),o=n("3Pt+"),i=n("ofXK"),r=n("wHSu"),a=n("fXoL"),s=n("tyNb"),l=n("AehT"),d=n("Qhg0"),p=n("tk/3");let m=(()=>{class e{constructor(e){this.http=e}getAllProjects(){return this.http.get(d.a.configs.baseUrl+"/projects")}addProject(e){return this.http.post(d.a.configs.baseUrl+"/projects",e)}getAllComponents(){return this.http.get(d.a.configs.baseUrl+"/components")}getApplicationsByProjectId(e){return this.http.get(`${d.a.configs.baseUrl}/projects/${e}/applications`)}updateApplication(e,t,n){return this.http.put(`${d.a.configs.baseUrl}/applications/${e}/configs/${t}`,n)}deleteApplication(e,t,n){return this.http.delete(`${d.a.configs.baseUrl}/applications/${e}/configs/${t}?changeMessage=${n}`)}deleteComponent(e){return this.http.delete(`${d.a.configs.baseUrl}/applications/${e}`)}createApplication(e,t){return this.http.post(`${d.a.configs.baseUrl}/projects/${e}/applications`,t)}}return e.\u0275fac=function(t){return new(t||e)(a.kc(p.c))},e.\u0275prov=a.Sb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var b=n("XNiG");let f=(()=>{class e{constructor(e){this.http=e,this.fileFetchedSubj=new b.a,this.fileSelectedSubj=new b.a,this.errorFetchingSubj=new b.a,this.deleteComponentSubj=new b.a,this.addConfig=new b.a}getSelectedFile(e,t,n){const c=t.join("/");let o;o=c?`${d.a.configs.baseUrl}/applications/${e}/configs/${c}/${n}`:`${d.a.configs.baseUrl}/applications/${e}/configs/${n}`,this.http.get(o).subscribe(t=>{this.fileSelectedSubj.next(!1),this.fileFetchedSubj.next(Object.assign(Object.assign({},t),{appId:e}))},e=>{this.fileSelectedSubj.next(!1),this.errorFetchingSubj.next(!0)})}deleteComponent(){return this.deleteComponentSubj}addComponentConfig(){return this.addConfig}fileFetched(){return this.fileFetchedSubj}fileSelected(){return this.fileSelectedSubj}onNotFound(){return this.errorFetchingSubj}}return e.\u0275fac=function(t){return new(t||e)(a.kc(p.c))},e.\u0275prov=a.Sb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var u=n("1kSV"),g=n("6NWb");const h=["reason"],v=["content"];function F(e,t){if(1&e&&a.Xb(0,"fa-icon",10),2&e){const e=a.rc(2);a.zc("icon",e.faSpinner)("spin",!0)}}function y(e,t){if(1&e){const e=a.dc();a.cc(0,"div",1),a.cc(1,"h4",2),a.Uc(2,"Confirmar cambios"),a.bc(),a.bc(),a.cc(3,"div",3),a.cc(4,"p"),a.Uc(5,"Ingrese motivo por el cual realiza los cambios"),a.bc(),a.cc(6,"textarea",4,5),a.oc("ngModelChange",(function(t){return a.Kc(e),a.rc().changeReason=t})),a.bc(),a.bc(),a.cc(8,"div",6),a.cc(9,"button",7),a.oc("click",(function(){return t.$implicit.dismiss()})),a.Uc(10,"Cancelar"),a.bc(),a.cc(11,"button",8),a.oc("click",(function(){return a.Kc(e),a.rc().confirmChanges()})),a.Uc(12," Confirmar "),a.Sc(13,F,1,2,"fa-icon",9),a.bc(),a.bc()}if(2&e){const e=a.rc();a.Fb(6),a.zc("ngModel",e.changeReason),a.Fb(3),a.zc("disabled",e.isLoading),a.Fb(2),a.zc("disabled",e.changeReason.length<1||e.isLoading),a.Fb(2),a.zc("ngIf",e.isLoading)}}let C=(()=>{class e{constructor(e){this.modalService=e,this.save=new a.n,this.isLoading=!1,this.operation="",this.changeReason="",this.faSpinner=r.k}handleModal(){this.modalReference=this.modalService.open(this.content,{ariaLabelledBy:"modal-basic-title",backdrop:"static"})}onOpen(e){this.operation=e,this.handleModal()}openAndSubscribe(){return this.modalService.open(this.content,{ariaLabelledBy:"modal-basic-title",backdrop:"static"}).result}confirmChanges(){this.isLoading=!0,this.save.emit({reason:this.changeReason,operation:this.operation})}closeModal(){this.isLoading=!1,this.changeReason="",this.modalReference.close()}clearData(){this.changeReason=""}}return e.\u0275fac=function(t){return new(t||e)(a.Wb(u.e))},e.\u0275cmp=a.Qb({type:e,selectors:[["bo-confirm-changes-modal"]],viewQuery:function(e,t){var n;1&e&&(a.Pc(h,!0),a.Pc(v,!0)),2&e&&(a.Ic(n=a.pc())&&(t.reason=n.first),a.Ic(n=a.pc())&&(t.content=n.first))},outputs:{save:"save"},decls:2,vars:0,consts:[["content",""],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],[1,"modal-body","mh-150"],["maxlength","200",1,"plain-text","mb-4",3,"ngModel","ngModelChange"],["reason",""],[1,"modal-footer"],[1,"btn","btn-secondary","btn-sm","p-2",3,"disabled","click"],[1,"btn","btn-primary","btn-sm","p-2",3,"disabled","click"],["style","color: #4b555f",3,"icon","spin",4,"ngIf"],[2,"color","#4b555f",3,"icon","spin"]],template:function(e,t){1&e&&a.Sc(0,y,14,4,"ng-template",null,0,a.Tc)},directives:[o.b,o.j,o.n,o.p,i.n,g.a],styles:[".mh-150[_ngcontent-%COMP%], .plain-text[_ngcontent-%COMP%]{min-height:150px}.plain-text[_ngcontent-%COMP%]{resize:none;background-color:#fff;width:100%;border-color:#cdcdcd;padding:5px 10px}"]}),e})();class S{static cannotContainSpace(e){return null!=e&&null!=e.value&&e.value.indexOf(" ")>=0?{cannotContainSpace:!0}:null}}const j=["content"];function x(e,t){1&e&&(a.cc(0,"div",19),a.Uc(1," queuename no puede contener espacios. "),a.bc())}function M(e,t){if(1&e&&(a.cc(0,"option"),a.Uc(1),a.bc()),2&e){const e=t.$implicit;a.Fb(1),a.Vc(e)}}function P(e,t){if(1&e&&a.Xb(0,"fa-icon",20),2&e){const e=a.rc(2);a.zc("icon",e.faSpinner)("spin",!0)}}const w=function(e){return{"form-control":!0,"is-invalid":e}};function O(e,t){if(1&e){const e=a.dc();a.cc(0,"div",1),a.cc(1,"h4",2),a.Uc(2,"A\xf1adir componente "),a.bc(),a.bc(),a.cc(3,"div",3),a.cc(4,"form",4),a.cc(5,"div",5),a.cc(6,"label",6),a.Uc(7,"Nombre"),a.bc(),a.Xb(8,"input",7),a.bc(),a.cc(9,"div",5),a.cc(10,"label",8),a.Uc(11,"Queuename"),a.bc(),a.Xb(12,"input",9),a.Sc(13,x,2,0,"div",10),a.bc(),a.cc(14,"div",5),a.cc(15,"label",6),a.Uc(16,"Tipo"),a.bc(),a.cc(17,"select",11),a.Sc(18,M,2,1,"option",12),a.bc(),a.bc(),a.cc(19,"div",5),a.cc(20,"label",13),a.Uc(21,"File"),a.bc(),a.cc(22,"input",14),a.oc("change",(function(t){return a.Kc(e),a.rc().onFileChange(t.target.files)})),a.bc(),a.bc(),a.bc(),a.bc(),a.cc(23,"div",15),a.cc(24,"button",16),a.oc("click",(function(){return t.$implicit.dismiss()})),a.Uc(25,"Cancelar"),a.bc(),a.cc(26,"button",17),a.oc("click",(function(){return a.Kc(e),a.rc().emitCreated()})),a.Uc(27," Confirmar "),a.Sc(28,P,1,2,"fa-icon",18),a.bc(),a.bc()}if(2&e){const e=a.rc();a.Fb(4),a.zc("formGroup",e.myForm),a.Fb(8),a.zc("ngClass",a.Dc(7,w,e.myForm.get("queuename").touched&&e.myForm.get("queuename").errors&&e.myForm.get("queuename").errors.cannotContainSpace)),a.Fb(1),a.zc("ngIf",e.myForm.get("queuename").touched&&e.myForm.get("queuename").errors&&e.myForm.get("queuename").errors.cannotContainSpace),a.Fb(5),a.zc("ngForOf",e.types),a.Fb(6),a.zc("disabled",e.isLoading),a.Fb(2),a.zc("disabled",e.isLoading||!e.myForm.valid),a.Fb(2),a.zc("ngIf",e.isLoading)}}let k=(()=>{class e{constructor(e){this.modalService=e,this.types=["SERVICE","CONNECTOR","ENDPOINT"],this.fileToUpload=null,this.myForm=new o.g({name:new o.d("",[o.u.required,o.u.minLength(3)]),queuename:new o.d("",[o.u.required,o.u.minLength(3),S.cannotContainSpace]),fileType:new o.d("",[o.u.required,o.u.minLength(3)])}),this.created=new a.n,this.isLoading=!1,this.operation="",this.changeReason="",this.faSpinner=r.k}handleModal(){this.modalReference=this.modalService.open(this.content,{ariaLabelledBy:"modal-basic-title",beforeDismiss:()=>this.clearData(),backdrop:"static"})}onOpen(e){this.myForm.controls.fileType.setValue(this.types[0]),this.operation=e,this.handleModal()}closeModal(){this.clearData(),this.isLoading=!1,this.modalReference.close()}clearData(){return this.myForm.reset(),this.fileToUpload=null,!0}onError(){this.isLoading=!1}get f(){return this.myForm.controls}onFileChange(e){this.fileToUpload=e.item(0)}emitCreated(){this.isLoading=!0;const e=new FormData;e.append("file",this.fileToUpload),e.append("fileType","zip"),e.append("type",this.myForm.get("fileType").value),e.append("queueName",this.myForm.get("queuename").value),e.append("name",this.myForm.get("name").value),this.created.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(a.Wb(u.e))},e.\u0275cmp=a.Qb({type:e,selectors:[["bo-add-application-modal"]],viewQuery:function(e,t){var n;1&e&&a.Pc(j,!0),2&e&&a.Ic(n=a.pc())&&(t.content=n.first)},inputs:{projectId:"projectId"},outputs:{created:"created"},decls:2,vars:0,consts:[["content",""],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],[1,"modal-body","mh-150"],[3,"formGroup"],[1,"form-group"],["for","name"],["formControlName","name","id","name","type","text",1,"form-control"],["for","queuename"],["formControlName","queuename","id","queuename","type","text",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["formControlName","fileType",1,"custom-select"],[4,"ngFor","ngForOf"],["for","file"],["accept",".zip","id","file","type","file",1,"form-control","py-1","px-2",3,"change"],[1,"modal-footer"],[1,"btn","btn-secondary","btn-sm","p-2",3,"disabled","click"],[1,"btn","btn-primary","btn-sm","p-2",3,"disabled","click"],["style","color: #4b555f",3,"icon","spin",4,"ngIf"],[1,"invalid-feedback"],[2,"color","#4b555f",3,"icon","spin"]],template:function(e,t){1&e&&a.Sc(0,O,29,9,"ng-template",null,0,a.Tc)},directives:[o.w,o.o,o.h,o.b,o.n,o.f,i.l,i.n,o.t,i.m,o.q,o.v,g.a],styles:[""]}),e})();class I{static properFormat(e){return e.parent&&"Propiedades"==e.parent.get("fileType").value&&null!=e&&null!=e.value&&!I.isValidContent(e.value)?{invalidPropertyFormat:!0}:null}static isValidContent(e){let t=e.split("\n");for(let n of t)if(n.length>1&&!n.includes("="))return!1;return!0}}const z=["content"];function U(e,t){1&e&&(a.cc(0,"div",19),a.Uc(1," El nombre de la configuraci\xf3n no puede contener espacios. "),a.bc())}function D(e,t){if(1&e&&(a.cc(0,"option"),a.Uc(1),a.bc()),2&e){const e=t.$implicit;a.Fb(1),a.Vc(e)}}function _(e,t){1&e&&(a.cc(0,"div",19),a.Uc(1," La ruta no puede contener espacios. "),a.bc())}function L(e,t){1&e&&(a.cc(0,"div",19),a.Uc(1," El contenido del archivo no tiene un formato correcto "),a.bc())}function T(e,t){if(1&e&&a.Xb(0,"fa-icon",20),2&e){const e=a.rc(2);a.zc("icon",e.faSpinner)("spin",!0)}}const A=function(e){return{"form-control":!0,"is-invalid":e}},E=function(e){return{"is-invalid":e}};function N(e,t){if(1&e){const e=a.dc();a.cc(0,"div",1),a.cc(1,"h4",2),a.Uc(2,"Agregar configuraci\xf3n "),a.bc(),a.bc(),a.cc(3,"div",3),a.cc(4,"form",4),a.cc(5,"div",5),a.cc(6,"label",6),a.Uc(7,"Nombre de la configuraci\xf3n"),a.bc(),a.Xb(8,"input",7),a.Sc(9,U,2,0,"div",8),a.bc(),a.cc(10,"div",5),a.cc(11,"label",6),a.Uc(12,"Tipo"),a.bc(),a.cc(13,"select",9),a.Sc(14,D,2,1,"option",10),a.bc(),a.bc(),a.cc(15,"div",5),a.cc(16,"label",6),a.Uc(17,"Mensaje"),a.bc(),a.Xb(18,"input",11),a.bc(),a.cc(19,"div",5),a.cc(20,"label",12),a.Uc(21,"Ruta (Opcional)"),a.bc(),a.Xb(22,"input",13),a.Sc(23,_,2,0,"div",8),a.bc(),a.cc(24,"div",5),a.cc(25,"label",6),a.Uc(26,"Contenido"),a.bc(),a.cc(27,"textarea",14),a.Uc(28," "),a.bc(),a.Sc(29,L,2,0,"div",8),a.bc(),a.bc(),a.bc(),a.cc(30,"div",15),a.cc(31,"button",16),a.oc("click",(function(){return t.$implicit.dismiss()})),a.Uc(32,"Cancelar"),a.bc(),a.cc(33,"button",17),a.oc("click",(function(){return a.Kc(e),a.rc().emitCreated()})),a.Uc(34," Confirmar "),a.Sc(35,T,1,2,"fa-icon",18),a.bc(),a.bc()}if(2&e){const e=a.rc();a.Fb(4),a.zc("formGroup",e.myForm),a.Fb(4),a.zc("ngClass",a.Dc(11,A,e.myForm.get("name").touched&&e.myForm.get("name").errors&&e.myForm.get("name").errors.cannotContainSpace)),a.Fb(1),a.zc("ngIf",e.myForm.get("name").touched&&e.myForm.get("name").errors&&e.myForm.get("name").errors.cannotContainSpace),a.Fb(5),a.zc("ngForOf",e.types),a.Fb(8),a.zc("ngClass",a.Dc(13,A,e.myForm.get("path").touched&&e.myForm.get("path").errors&&e.myForm.get("path").errors.cannotContainSpace)),a.Fb(1),a.zc("ngIf",e.myForm.get("path").touched&&e.myForm.get("path").errors&&e.myForm.get("path").errors.cannotContainSpace),a.Fb(4),a.zc("ngClass",a.Dc(15,E,e.myForm.get("content").touched&&e.myForm.get("content").errors&&e.myForm.get("content").errors.invalidPropertyFormat)),a.Fb(2),a.zc("ngIf",e.myForm.get("content").touched&&e.myForm.get("content").errors&&e.myForm.get("content").errors.invalidPropertyFormat),a.Fb(2),a.zc("disabled",e.isLoading),a.Fb(2),a.zc("disabled",e.isLoading||!e.myForm.valid),a.Fb(2),a.zc("ngIf",e.isLoading)}}let $=(()=>{class e{constructor(e){this.modalService=e,this.types=["Texto","Propiedades"],this.fileToUpload=null,this.myForm=new o.g({name:new o.d("",[o.u.required,o.u.minLength(3),S.cannotContainSpace]),path:new o.d("",[S.cannotContainSpace]),fileType:new o.d("",[o.u.required,o.u.minLength(3)]),message:new o.d("",[o.u.required,o.u.minLength(3)]),content:new o.d("",[o.u.required,o.u.minLength(3),I.properFormat])}),this.created=new a.n,this.isLoading=!1,this.operation="",this.changeReason="",this.faSpinner=r.k}ngOnInit(){this.myForm.get("fileType").valueChanges.subscribe(e=>{this.myForm.controls.content.updateValueAndValidity()})}handleModal(){this.modalReference=this.modalService.open(this.content,{ariaLabelledBy:"modal-basic-title",size:"lg",beforeDismiss:()=>this.clearData(),backdrop:"static"})}onOpen(e){this.myForm.controls.fileType.setValue(this.types[0]),this.operation=e,this.handleModal()}closeModal(){this.clearData(),this.isLoading=!1,this.modalReference.close()}clearData(){return this.myForm.reset(),this.fileToUpload=null,!0}onError(){this.isLoading=!1}get f(){return this.myForm.controls}onFileChange(e){this.fileToUpload=e.item(0)}emitCreated(){this.isLoading=!0,this.created.emit(this.createFormData())}createFormData(){const e=new FormData;return e.append("type",this.myForm.get("fileType").value),e.append("path",this.myForm.get("path").value),e.append("name",this.myForm.get("name").value),e.append("message",this.myForm.get("message").value),e.append("content",this.myForm.get("content").value),e}}return e.\u0275fac=function(t){return new(t||e)(a.Wb(u.e))},e.\u0275cmp=a.Qb({type:e,selectors:[["bo-add-component-configuration"]],viewQuery:function(e,t){var n;1&e&&a.Pc(z,!0),2&e&&a.Ic(n=a.pc())&&(t.content=n.first)},inputs:{projectId:"projectId"},outputs:{created:"created"},decls:2,vars:0,consts:[["content",""],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],[1,"modal-body","mh-150"],[3,"formGroup"],[1,"form-group"],["for","name"],["formControlName","name","id","name","type","text",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["formControlName","fileType",1,"custom-select"],[4,"ngFor","ngForOf"],["formControlName","message","id","message","type","text",1,"form-control"],["for","path"],["formControlName","path","id","path","type","text",3,"ngClass"],["formControlName","content","id","content",1,"form-control","plain-text",3,"ngClass"],[1,"modal-footer"],[1,"btn","btn-secondary","btn-sm","p-2",3,"disabled","click"],[1,"btn","btn-primary","btn-sm","p-2",3,"disabled","click"],["style","color: #4b555f",3,"icon","spin",4,"ngIf"],[1,"invalid-feedback"],[2,"color","#4b555f",3,"icon","spin"]],template:function(e,t){1&e&&a.Sc(0,N,36,17,"ng-template",null,0,a.Tc)},directives:[o.w,o.o,o.h,o.b,o.n,o.f,i.l,i.n,o.t,i.m,o.q,o.v,g.a],styles:[".plain-text[_ngcontent-%COMP%]{resize:vertical;width:100%;min-height:300px;padding:10px}.modal-body[_ngcontent-%COMP%]{padding:1rem 2rem}"]}),e})();var q=n("d2bA"),V=n("R0Ic");function K(e,t){if(1&e&&(a.cc(0,"div"),a.Xb(1,"bo-file-structure",12),a.bc()),2&e){const e=t.$implicit,n=a.rc(2);a.Fb(1),a.zc("node",e)("level",n.level+1)("path",n.path+(n.level>0?"/"+n.node.name:""))("paddingInEm",n.level+1.5)}}function R(e,t){if(1&e){const e=a.dc();a.cc(0,"div",2),a.cc(1,"div"),a.cc(2,"p",3),a.oc("click",(function(){a.Kc(e);const t=a.rc();return t.isCollapsed=!t.isCollapsed})),a.Xb(3,"fa-icon",4),a.Uc(4),a.bc(),a.cc(5,"span",5),a.cc(6,"fa-icon",6),a.oc("click",(function(){return a.Kc(e),a.rc().onAddConfig()})),a.bc(),a.cc(7,"fa-icon",7),a.oc("click",(function(){return a.Kc(e),a.rc().onDelete()})),a.bc(),a.bc(),a.bc(),a.Xb(8,"div",8),a.cc(9,"div",9),a.cc(10,"div",10),a.Sc(11,K,2,4,"div",11),a.bc(),a.bc(),a.bc()}if(2&e){const e=a.rc();a.Fb(2),a.Gb("aria-expanded",!e.isCollapsed),a.Fb(1),a.zc("icon",e.isCollapsed?e.faCaretRight:e.faCaretDown),a.Fb(1),a.Xc(" ",e.node.name," (",e.node.id,") "),a.Fb(2),a.zc("icon",e.faPlusCircle),a.Fb(1),a.zc("icon",e.faTrash),a.Fb(2),a.zc("ngbCollapse",e.isCollapsed)("@expandCollapse",e.isCollapsed?"closed":"open"),a.Fb(2),a.zc("ngForOf",e.node.nodes)}}function X(e,t){if(1&e){const e=a.dc();a.cc(0,"span",17),a.oc("click",(function(){a.Kc(e);const t=a.rc(2);return t.onFileSelected(t.node)})),a.Xb(1,"fa-icon",18),a.Uc(2),a.bc()}if(2&e){const e=a.rc(2);a.Fb(1),a.zc("icon",e.faFile),a.Fb(1),a.Wc(" ",e.node.name," ")}}function W(e,t){if(1&e&&(a.cc(0,"span"),a.Xb(1,"fa-icon",19),a.Uc(2),a.bc()),2&e){const e=a.rc(2);a.Fb(1),a.zc("icon",e.faFolder),a.Fb(1),a.Wc(" ",e.node.name," ")}}function Q(e,t){if(1&e&&(a.cc(0,"div"),a.Xb(1,"bo-file-structure",12),a.bc()),2&e){const e=t.$implicit,n=a.rc(2);a.Fb(1),a.zc("node",e)("level",n.level+1)("path",n.path+(n.level>0?"/"+n.node.name:""))("paddingInEm",.65*n.level)}}const G=function(e){return{"padding-left":e}};function B(e,t){if(1&e){const e=a.dc();a.cc(0,"div",13),a.cc(1,"span",14),a.oc("click",(function(){a.Kc(e);const t=a.rc();return t.isCollapsed=!t.isCollapsed})),a.Sc(2,X,3,2,"span",15),a.Sc(3,W,3,2,"span",16),a.bc(),a.cc(4,"div",9),a.cc(5,"div",10),a.Sc(6,Q,2,4,"div",11),a.bc(),a.bc(),a.bc()}if(2&e){const e=a.rc();a.zc("ngStyle",a.Dc(7,G,e.getPadding())),a.Fb(1),a.Gb("aria-expanded",!e.isCollapsed),a.Fb(1),a.zc("ngIf",!e.node.nodes),a.Fb(1),a.zc("ngIf",e.node.nodes),a.Fb(1),a.zc("ngbCollapse",e.isCollapsed)("@expandCollapse",e.isCollapsed?"closed":"open"),a.Fb(2),a.zc("ngForOf",e.node.nodes)}}let J=(()=>{class e{constructor(e){this.stateService=e,this.faFolder=r.g,this.faFile=r.f,this.faCaretDown=r.a,this.faCaretRight=r.b,this.faPlusCircle=r.j,this.faTrash=r.o,this.isCollapsed=!0,this.paddingInEm=0,this.level=0,this.path=""}getPadding(){return this.paddingInEm+"em"}onFileSelected(e){this.stateService.fileSelected().next(!0);const t=this.path.split("/")[0];let n=this.path.split("/");n.shift(),this.stateService.getSelectedFile(t,n,e.name)}onDelete(){this.stateService.deleteComponent().next(this.node)}onAddConfig(){this.stateService.addComponentConfig().next(this.node)}}return e.\u0275fac=function(t){return new(t||e)(a.Wb(f))},e.\u0275cmp=a.Qb({type:e,selectors:[["bo-file-structure"]],inputs:{node:"node",paddingInEm:"paddingInEm",level:"level",path:"path"},decls:2,vars:2,consts:[["class","level-0",4,"ngIf"],["class","mt-1",3,"ngStyle",4,"ngIf"],[1,"level-0"],["aria-controls","collapseExample",1,"title",3,"click"],[2,"color","#4b555f","margin-right","5px",3,"icon"],[1,"float-right"],["placement","top","ngbTooltip","Agregar configuraci\xf3n",1,"action-icon","add",3,"icon","click"],["placement","top","ngbTooltip","Eliminar componente",1,"action-icon","delete",3,"icon","click"],[1,"divider"],["id","collapseExample",3,"ngbCollapse"],[1,"folder"],[4,"ngFor","ngForOf"],[3,"node","level","path","paddingInEm"],[1,"mt-1",3,"ngStyle"],["aria-controls","collapseExample",2,"cursor","pointer",3,"click"],[3,"click",4,"ngIf"],[4,"ngIf"],[3,"click"],[1,"icon","file",3,"icon"],["size","lg",1,"icon","folder",3,"icon"]],template:function(e,t){1&e&&(a.Sc(0,R,12,9,"div",0),a.Sc(1,B,7,9,"div",1)),2&e&&(a.zc("ngIf",0==t.level),a.Fb(1),a.zc("ngIf",t.level>0))},directives:[i.n,g.a,u.i,u.c,i.m,e,i.o],styles:[".level-0[_ngcontent-%COMP%]{padding:5px}.title[_ngcontent-%COMP%]{font-weight:700;cursor:pointer;display:inline-block;margin-bottom:10px}.divider[_ngcontent-%COMP%]{padding-bottom:5px;margin-bottom:2px;border-top:2px solid hsla(0,0%,86.3%,.48627450980392156);height:2px}.action-icon[_ngcontent-%COMP%]{cursor:pointer}.action-icon.delete[_ngcontent-%COMP%]:hover{color:#dc3545}.action-icon.add[_ngcontent-%COMP%]{margin-right:10px}.action-icon.add[_ngcontent-%COMP%]:hover{color:#1890ff}.icon[_ngcontent-%COMP%]{margin-right:5px}.icon.file[_ngcontent-%COMP%]{color:#4b555f}.icon.folder[_ngcontent-%COMP%]{color:#6ebdd7}"],data:{animation:[Object(V.j)("expandCollapse",[Object(V.g)("open",Object(V.h)({height:"100%",opacity:1})),Object(V.g)("closed",Object(V.h)({height:0,opacity:0})),Object(V.i)("* => *",[Object(V.e)("500ms")])])]}}),e})();const H=["confirmDeleteModal"];function Y(e,t){if(1&e){const e=a.dc();a.cc(0,"div",12),a.cc(1,"label",13),a.Uc(2),a.cc(3,"fa-icon",14),a.oc("click",(function(){a.Kc(e);const n=t.$implicit;return a.rc().onDelete(n.key)})),a.bc(),a.bc(),a.cc(4,"input",15),a.oc("change",(function(n){a.Kc(e);const c=t.$implicit;return a.rc().onChange(n.target.value,c.key)})),a.bc(),a.bc()}if(2&e){const e=t.$implicit,n=a.rc();a.Fb(2),a.Wc(" ",e.key," "),a.Fb(1),a.zc("icon",n.faTrash),a.Fb(1),a.zc("value",e.value)}}let Z=(()=>{class e{constructor(){this.showConfirmChanges=!1,this.propertiesChange=new a.n,this.faTimes=r.m,this.faTrash=r.o,this.faPlus=r.i,this.isAdding=!1,this.newKey="",this.newValue=""}get properties(){return this.propertiesValue}set properties(e){this.propertiesValue=e,this.propertiesChange.emit(this.propertiesValue)}onDelete(e){this.keyToDelete=e,this.confirmDeleteModal.onOpen(`\xbfEst\xe1s seguro que quieres eliminar la propiedad ${e}?`)}onConfirmDelete(){delete this.properties[this.keyToDelete],this.confirmDeleteModal.closeModal(),this.showConfirmChanges=!0}onAddProperty(){this.properties[this.newKey]=this.newValue,this.newKey="",this.newValue=""}onChange(e,t){this.properties[t]=e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Qb({type:e,selectors:[["bo-properties-viewer"]],viewQuery:function(e,t){var n;1&e&&a.Pc(H,!0),2&e&&a.Ic(n=a.pc())&&(t.confirmDeleteModal=n.first)},inputs:{showConfirmChanges:"showConfirmChanges",properties:"properties"},outputs:{propertiesChange:"propertiesChange"},decls:16,vars:6,consts:[[1,"p-4","container-fluid","mt-4","properties-container"],["class","property",4,"ngFor","ngForOf"],[1,"mt-4","mb-4","add-container"],[1,"font-weight-bold","mb-2"],[1,"row"],[1,"col-md-5"],["type","text","placeholder","Nombre de la propiedad",1,"form-control","add-input","mr-2",3,"ngModel","ngModelChange"],["type","text","placeholder","Valor de la propiedad",1,"form-control","add-input",3,"ngModel","ngModelChange"],[1,"col-md-2"],[1,"btn","btn-primary","btn-sm","py-2","px-3",3,"disabled","click"],[3,"confirm"],["confirmDeleteModal",""],[1,"property"],[1,"label"],["placement","top","ngbTooltip","Eliminar propiedad",1,"action-icon","delete",3,"icon","click"],["type","text",1,"form-control",3,"value","change"]],template:function(e,t){1&e&&(a.cc(0,"div",0),a.Sc(1,Y,5,3,"div",1),a.sc(2,"keyvalue"),a.cc(3,"div",2),a.cc(4,"p",3),a.Uc(5," Agregar una nueva propiedad"),a.bc(),a.cc(6,"div",4),a.cc(7,"div",5),a.cc(8,"input",6),a.oc("ngModelChange",(function(e){return t.newKey=e})),a.bc(),a.bc(),a.cc(9,"div",5),a.cc(10,"input",7),a.oc("ngModelChange",(function(e){return t.newValue=e})),a.bc(),a.bc(),a.cc(11,"div",8),a.cc(12,"button",9),a.oc("click",(function(){return t.onAddProperty()})),a.Uc(13," Agregar "),a.bc(),a.bc(),a.bc(),a.bc(),a.bc(),a.cc(14,"bo-confirm-modal",10,11),a.oc("confirm",(function(){return t.onConfirmDelete()})),a.bc()),2&e&&(a.Fb(1),a.zc("ngForOf",a.tc(2,4,t.properties)),a.Fb(7),a.zc("ngModel",t.newKey),a.Fb(2),a.zc("ngModel",t.newValue),a.Fb(2),a.zc("disabled",0===t.newValue.length||0===t.newKey.length))},directives:[i.m,o.b,o.n,o.p,q.a,g.a,u.i],pipes:[i.h],styles:[".property[_ngcontent-%COMP%]{margin-bottom:2em}.property[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block}.property[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:40%;margin-left:15px;float:right}.properties-container[_ngcontent-%COMP%]{max-height:600px;overflow:scroll;border:1px solid #cdcdcd;padding:15px}.delete[_ngcontent-%COMP%]{color:#4b555f;margin-left:5px;cursor:pointer;display:none}.delete[_ngcontent-%COMP%]:hover{color:#dc3545}.label[_ngcontent-%COMP%]:hover   .delete[_ngcontent-%COMP%]{display:inline-block}.add-new[_ngcontent-%COMP%]{margin-top:2em;padding:20px 15px}.add-new[_ngcontent-%COMP%]   .add-input[_ngcontent-%COMP%]{display:inline-block;width:45%}.add-new[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:first-child{margin-right:5px}.add-container[_ngcontent-%COMP%]{padding-top:2em;border-top:1px solid #cdcdcd}"]}),e})();const ee=["confirmModal"],te=["confirmDeleteModal"],ne=["addModal"],ce=["addConfig"];function oe(e,t){1&e&&(a.cc(0,"div",15),a.Xb(1,"div",16),a.bc())}function ie(e,t){if(1&e&&(a.cc(0,"div",23),a.Xb(1,"bo-file-structure",24),a.bc()),2&e){const e=t.$implicit;a.Fb(1),a.zc("node",e)("path",e.id)}}function re(e,t){1&e&&(a.cc(0,"div",25),a.Xb(1,"div",16),a.bc())}function ae(e,t){1&e&&(a.cc(0,"h4",28),a.Uc(1," Seleccione un archivo para comenzar a editar "),a.bc())}function se(e,t){if(1&e&&(a.cc(0,"h4"),a.Uc(1),a.bc()),2&e){const e=a.rc(3);a.Fb(1),a.Wc(" ",e.selectedFile.path," ")}}function le(e,t){if(1&e){const e=a.dc();a.cc(0,"div"),a.cc(1,"textarea",29),a.oc("ngModelChange",(function(t){return a.Kc(e),a.rc(3).selectedFile.content=t})),a.Uc(2,"                      "),a.bc(),a.cc(3,"div",30),a.cc(4,"button",31),a.oc("click",(function(){return a.Kc(e),a.rc(3).onDeleteFile()})),a.Uc(5,"Borrar archivo"),a.bc(),a.cc(6,"button",32),a.oc("click",(function(){return a.Kc(e),a.rc(3).openConfirm()})),a.Uc(7,"Guardar cambios"),a.bc(),a.bc(),a.bc()}if(2&e){const e=a.rc(3);a.Fb(1),a.zc("ngModel",e.selectedFile.content)}}function de(e,t){if(1&e){const e=a.dc();a.cc(0,"div"),a.cc(1,"bo-properties-viewer",33),a.oc("propertiesChange",(function(t){return a.Kc(e),a.rc(3).selectedFile.params=t})),a.bc(),a.cc(2,"div",30),a.cc(3,"button",31),a.oc("click",(function(){return a.Kc(e),a.rc(3).onDeleteFile()})),a.Uc(4,"Borrar archivo"),a.bc(),a.cc(5,"button",32),a.oc("click",(function(){return a.Kc(e),a.rc(3).openConfirm()})),a.Uc(6,"Guardar cambios"),a.bc(),a.bc(),a.bc()}if(2&e){const e=a.rc(3);a.Fb(1),a.zc("properties",e.selectedFile.params)}}function pe(e,t){if(1&e&&(a.cc(0,"div",26),a.Sc(1,ae,2,0,"h4",27),a.Sc(2,se,2,1,"h4",7),a.Sc(3,le,8,1,"div",7),a.Sc(4,de,7,1,"div",7),a.bc()),2&e){const e=a.rc(2);a.Fb(1),a.zc("ngIf",!e.selectedFile),a.Fb(1),a.zc("ngIf",e.selectedFile),a.Fb(1),a.zc("ngIf",e.selectedFile&&"plaintext"===e.selectedFile.type),a.Fb(1),a.zc("ngIf",e.selectedFile&&"keyvalue"===e.selectedFile.type)}}function me(e,t){if(1&e&&(a.cc(0,"div",17),a.cc(1,"div",18),a.Sc(2,ie,2,2,"div",19),a.bc(),a.cc(3,"div",20),a.Sc(4,re,2,0,"div",21),a.Sc(5,pe,5,4,"div",22),a.bc(),a.bc()),2&e){const e=a.rc();a.Fb(2),a.zc("ngForOf",e.projects),a.Fb(2),a.zc("ngIf",e.isLoadingFile),a.Fb(1),a.zc("ngIf",!e.isLoadingFile)}}function be(e,t){1&e&&(a.cc(0,"div"),a.cc(1,"ngb-alert",34),a.Uc(2," No existen componentes para configurar en este proyecto "),a.bc(),a.bc())}let fe=(()=>{class e{constructor(e,t,n,c){this.router=e,this.notifService=t,this.projectService=n,this.stateService=c,this.isLoading=!0,this.isLoadingFile=!1,this.faPlusCircle=r.j,this.router.getCurrentNavigation().extras.state?this.project=this.router.getCurrentNavigation().extras.state.project:this.projectService.getAllProjects().subscribe(e=>{const t=parseInt(this.router.url.split("/")[2]);this.project=e.find(e=>e.id==t),this.getProjectInfo()})}ngOnInit(){this.fileFetchedSubs=this.stateService.fileFetched().subscribe({next:e=>{this.selectedFile=e}}),this.addComponentConfigSubs=this.stateService.addComponentConfig().subscribe({next:e=>{this.addConfig.onOpen()}}),this.deleteComponentSubs=this.stateService.deleteComponent().subscribe({next:e=>{this.componentToDelete=e,this.confirmDeleteModal.onOpen(`\xbfEst\xe1s seguro que quieres eliminar el componente ${e.name}?`)}}),this.fileSelectedSubs=this.stateService.fileSelected().subscribe({next:e=>{this.isLoadingFile=e}}),this.fileNotFoundSubs=this.stateService.onNotFound().subscribe({next:e=>{this.isLoadingFile=!1,this.selectedFile=void 0,this.notifService.notificationEmitted().next(["error","No se ha encontrado el archivo seleccionado"])}}),this.project&&this.getProjectInfo()}ngOnDestroy(){this.fileFetchedSubs.unsubscribe(),this.fileSelectedSubs.unsubscribe(),this.deleteComponentSubs.unsubscribe(),this.fileNotFoundSubs.unsubscribe(),this.addComponentConfigSubs.unsubscribe()}getProjectInfo(){this.isLoading=!0,this.selectedFile=void 0,this.projectService.getApplicationsByProjectId(this.project.id).subscribe(e=>{this.projects=e,this.isLoading=!1},e=>{this.isLoading=!1})}openAdd(){this.addModal.onOpen()}openAddConfig(){this.addConfig.onOpen()}openConfirm(){this.confirmModal.onOpen("update")}onDeleteFile(){this.confirmModal.onOpen("delete")}onCreated(e){this.projectService.createApplication(this.project.id,e).subscribe(e=>{this.addModal.closeModal(),this.notifService.notificationEmitted().next(["success","Componente agregado correctamente"]),this.getProjectInfo()},e=>{this.notifService.unexpectedErrrorEmitted().next(),this.addModal.onError()})}onSave(e){let t;"update"==e.operation?(t="plaintext"===this.selectedFile.type?{changeMessage:e.reason,type:this.selectedFile.type,content:this.selectedFile.content,name:this.selectedFile.name}:{changeMessage:e.reason,type:this.selectedFile.type,params:this.selectedFile.params,name:this.selectedFile.name},this.updateApplication(t)):"delete"==e.operation&&this.deleteApplication(e.reason)}deleteApplication(e){this.projectService.deleteApplication(this.selectedFile.appId,this.selectedFile.path,e).subscribe(e=>{this.getProjectInfo(),this.confirmModal.closeModal(),this.notifService.notificationEmitted().next(["success","Archivo eliminado correctamente"])},e=>{this.notifService.unexpectedErrrorEmitted().next()})}updateApplication(e){this.projectService.updateApplication(this.selectedFile.appId,this.selectedFile.path,e).subscribe(e=>{this.confirmModal.closeModal(),this.notifService.notificationEmitted().next(["success","Cambios guardados correctamente"])},e=>{this.notifService.unexpectedErrrorEmitted().next()})}onConfirmDelete(){this.projectService.deleteComponent(this.componentToDelete.id).subscribe(e=>{this.getProjectInfo(),this.confirmDeleteModal.closeModal(),this.notifService.notificationEmitted().next(["success","Componente eliminado correctamente"])},e=>{this.notifService.unexpectedErrrorEmitted().next()})}}return e.\u0275fac=function(t){return new(t||e)(a.Wb(s.d),a.Wb(l.a),a.Wb(m),a.Wb(f))},e.\u0275cmp=a.Qb({type:e,selectors:[["bo-project-detail"]],viewQuery:function(e,t){var n;1&e&&(a.Pc(ee,!0),a.Pc(te,!0),a.Pc(ne,!0),a.Pc(ce,!0)),2&e&&(a.Ic(n=a.pc())&&(t.confirmModal=n.first),a.Ic(n=a.pc())&&(t.confirmDeleteModal=n.first),a.Ic(n=a.pc())&&(t.addModal=n.first),a.Ic(n=a.pc())&&(t.addConfig=n.first))},decls:20,vars:6,consts:[[1,"container-fluid"],[1,"title-container"],[1,"project-name"],[1,"project-description"],[1,"btn","btn-sm","btn-primary","float-right","p-2","mr-2",3,"click"],["class","spinner-container",4,"ngIf"],["class","row",4,"ngIf"],[4,"ngIf"],[3,"save"],["confirmModal",""],[3,"projectId","created"],["addModal",""],["addConfig",""],[3,"confirm"],["confirmDeleteModal",""],[1,"spinner-container"],[1,"spinner"],[1,"row"],[1,"col-md-4","border-right"],["class","mb-2",4,"ngFor","ngForOf"],[1,"col-md-8"],["class","spinner-container sticky-spinner",4,"ngIf"],["class","sticky",4,"ngIf"],[1,"mb-2"],[3,"node","path"],[1,"spinner-container","sticky-spinner"],[1,"sticky"],["class","file-selection",4,"ngIf"],[1,"file-selection"],[1,"plain-text",3,"ngModel","ngModelChange"],[1,"plain-actions","float-right"],[1,"btn","btn-sm","btn-danger","p-2","mr-2",3,"click"],[1,"btn","btn-sm","btn-primary","p-2",3,"click"],[3,"properties","propertiesChange"],["type","info",1,"no-result"]],template:function(e,t){1&e&&(a.cc(0,"div",0),a.cc(1,"div",1),a.cc(2,"h1",2),a.Uc(3),a.bc(),a.cc(4,"h3",3),a.Uc(5),a.bc(),a.cc(6,"button",4),a.oc("click",(function(){return t.openAdd()})),a.Uc(7,"Agregar componente"),a.bc(),a.bc(),a.cc(8,"div",0),a.Sc(9,oe,2,0,"div",5),a.Sc(10,me,6,3,"div",6),a.Sc(11,be,3,0,"div",7),a.bc(),a.bc(),a.cc(12,"bo-confirm-changes-modal",8,9),a.oc("save",(function(e){return t.onSave(e)})),a.bc(),a.cc(14,"bo-add-application-modal",10,11),a.oc("created",(function(e){return t.onCreated(e)})),a.bc(),a.Xb(16,"bo-add-component-configuration",null,12),a.cc(18,"bo-confirm-modal",13,14),a.oc("confirm",(function(){return t.onConfirmDelete()})),a.bc()),2&e&&(a.Fb(3),a.Wc(" ",null==t.project?null:t.project.name," "),a.Fb(2),a.Wc(" ",null==t.project?null:t.project.description," "),a.Fb(4),a.zc("ngIf",t.isLoading),a.Fb(1),a.zc("ngIf",!t.isLoading&&(null==t.projects?null:t.projects.length)>0),a.Fb(1),a.zc("ngIf",0==(null==t.projects?null:t.projects.length)),a.Fb(3),a.zc("projectId",null==t.project?null:t.project.id))},directives:[i.n,C,k,$,q.a,i.m,J,o.b,o.n,o.p,Z,u.a],styles:[".components-container[_ngcontent-%COMP%]{left:0;right:0;margin-left:auto;margin-right:auto;text-align:center;display:grid;grid-template-columns:repeat(auto-fit,minmax(25rem,.1fr));grid-gap:2rem}.component-card[_ngcontent-%COMP%]{min-height:35rem;max-height:35rem;width:20rem}.node[_ngcontent-%COMP%]{border:1px solid #dedede;padding:10px;display:flex}nz-tree[_ngcontent-%COMP%]{overflow:hidden;margin:0 -24px;padding:0 24px}.custom-node[_ngcontent-%COMP%]{cursor:pointer;line-height:24px;display:inline-block}.custom-node[_ngcontent-%COMP%], .file-name[_ngcontent-%COMP%], .folder-name[_ngcontent-%COMP%]{margin-left:4px}.file-desc[_ngcontent-%COMP%], .folder-desc[_ngcontent-%COMP%]{padding:0 8px;display:inline-block;background:#87ceff;color:#fff;position:relative;left:12px}.plain-text[_ngcontent-%COMP%]{resize:vertical;background-color:#fff;width:100%;min-height:600px;border-color:#cdcdcd;padding:10px}.border-right[_ngcontent-%COMP%]{border-right:1px solid #cdcdcd}.file-selection[_ngcontent-%COMP%]{text-align:center}.spinner-container[_ngcontent-%COMP%]{top:50%;left:55%!important}.sticky[_ngcontent-%COMP%]{top:10px}.sticky[_ngcontent-%COMP%], .sticky-spinner[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky}.sticky-spinner[_ngcontent-%COMP%]{top:40%;float:right;margin-right:25%}.project-name[_ngcontent-%COMP%]{display:inline-block;font-size:32px;margin-right:15px}.project-description[_ngcontent-%COMP%]{display:inline-block;font-style:italic;font-size:24px}  .no-result{margin-left:-15px;margin-top:20px}  .no-result button{display:none}"]}),e})();var ue=n("wuvN");const ge=["content"];function he(e,t){1&e&&(a.cc(0,"div",15),a.Uc(1," Nombre no puede contener espacios. "),a.bc())}function ve(e,t){if(1&e&&a.Xb(0,"fa-icon",16),2&e){const e=a.rc(2);a.zc("icon",e.faSpinner)("spin",!0)}}const Fe=function(e){return{"form-control":!0,"is-invalid":e}};function ye(e,t){if(1&e){const e=a.dc();a.cc(0,"div",2),a.cc(1,"h4",3),a.Uc(2," Agregar nuevo proyecto "),a.bc(),a.bc(),a.cc(3,"div",4),a.cc(4,"form",5),a.cc(5,"div",6),a.cc(6,"label",7),a.Uc(7,"Nombre"),a.bc(),a.Xb(8,"input",8),a.Sc(9,he,2,0,"div",9),a.bc(),a.cc(10,"div",6),a.cc(11,"label",7),a.Uc(12,"Descripci\xf3n"),a.bc(),a.cc(13,"textarea",10),a.Uc(14,"                    "),a.bc(),a.bc(),a.bc(),a.bc(),a.cc(15,"div",11),a.cc(16,"button",12),a.oc("click",(function(){return t.$implicit.dismiss()})),a.Uc(17,"Cancelar"),a.bc(),a.cc(18,"button",13),a.oc("click",(function(){return a.Kc(e),a.rc().emitCreated()})),a.Uc(19," Confirmar "),a.Sc(20,ve,1,2,"fa-icon",14),a.bc(),a.bc()}if(2&e){const e=a.rc();a.Fb(4),a.zc("formGroup",e.projectForm),a.Fb(4),a.zc("ngClass",a.Dc(6,Fe,e.projectForm.get("name").touched&&e.projectForm.get("name").errors&&e.projectForm.get("name").errors.cannotContainSpace)),a.Fb(1),a.zc("ngIf",e.projectForm.get("name").touched&&e.projectForm.get("name").errors&&e.projectForm.get("name").errors.cannotContainSpace),a.Fb(7),a.zc("disabled",e.isSending),a.Fb(2),a.zc("disabled",e.isSending||!e.projectForm.valid),a.Fb(2),a.zc("ngIf",e.isSending)}}let Ce=(()=>{class e{constructor(e){this.modalService=e,this.isVisible=!1,this.projectForm=new o.g({description:new o.d("",[o.u.required,o.u.minLength(3)]),name:new o.d("",[o.u.required,o.u.minLength(3),S.cannotContainSpace])}),this.isSending=!1,this.faSpinner=r.k,this.addNewProject=new a.n}submitForm(){for(const e in this.projectForm.controls)this.projectForm.controls[e].markAsDirty(),this.projectForm.controls[e].updateValueAndValidity()}handleModal(){this.modalReference=this.modalService.open(this.content,{ariaLabelledBy:"modal-basic-title",beforeDismiss:()=>this.clearData(),backdrop:"static"})}onOpen(){this.handleModal()}clearData(){return this.projectForm.reset(),!0}emitCreated(){this.isSending=!0,this.addNewProject.emit({name:this.projectForm.controls.name.value,description:this.projectForm.controls.description.value})}closeModal(){this.projectForm.reset(),this.isVisible=!1,this.isSending=!1,this.modalReference.close()}onError(){this.isSending=!1}}return e.\u0275fac=function(t){return new(t||e)(a.Wb(u.e))},e.\u0275cmp=a.Qb({type:e,selectors:[["bo-add-project"]],viewQuery:function(e,t){var n;1&e&&a.Pc(ge,!0),2&e&&a.Ic(n=a.pc())&&(t.content=n.first)},outputs:{addNewProject:"addNewProject"},decls:4,vars:0,consts:[["canShow","","route","/crearproyecto",1,"btn","btn-sm","btn-primary","p-2","add-project",3,"click"],["content",""],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],[1,"modal-body","mh-150"],[3,"formGroup"],[1,"form-group"],["for","name"],["formControlName","name","id","name","type","text","placeholder","Nombre del proyecto",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["formControlName","description","placeholder","Descripci\xf3n del proyecto","id","description",1,"form-control"],[1,"modal-footer"],[1,"btn","btn-secondary","btn-sm","p-2",3,"disabled","click"],[1,"btn","btn-primary","btn-sm","p-2",3,"disabled","click"],["style","color: #4b555f",3,"icon","spin",4,"ngIf"],[1,"invalid-feedback"],[2,"color","#4b555f",3,"icon","spin"]],template:function(e,t){1&e&&(a.cc(0,"a",0),a.oc("click",(function(){return t.onOpen()})),a.Uc(1," Agregar Proyecto\n"),a.bc(),a.Sc(2,ye,21,8,"ng-template",null,1,a.Tc))},directives:[ue.a,o.w,o.o,o.h,o.b,o.n,o.f,i.l,i.n,g.a],styles:[".login-form-margin[_ngcontent-%COMP%]{margin-bottom:16px}.add-project[_ngcontent-%COMP%]{float:right}.add-project-follow[_ngcontent-%COMP%]{position:absolute;top:85px;right:45px}"]}),e})(),Se=(()=>{class e{transform(e,t=60){return e.length>t?e.toString().substring(0,t)+"...":e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=a.Vb({name:"trim",type:e,pure:!0}),e})();const je=["addProject"],xe=function(e){return["/proyecto",e]},Me=function(e){return{project:e}};function Pe(e,t){if(1&e&&(a.cc(0,"div",8),a.cc(1,"div",9),a.cc(2,"h3",10),a.Uc(3),a.bc(),a.cc(4,"p",11),a.Uc(5),a.sc(6,"trim"),a.bc(),a.cc(7,"div",12),a.cc(8,"a",13),a.Uc(9,"Ver proyecto"),a.bc(),a.bc(),a.bc(),a.bc()),2&e){const e=t.$implicit;a.Fb(3),a.Vc(e.name),a.Fb(2),a.Wc(" ",a.uc(6,5,e.description,80)," "),a.Fb(3),a.zc("routerLink",a.Dc(8,xe,e.id))("route","/proyecto/"+e.id)("state",a.Dc(10,Me,e))}}function we(e,t){if(1&e&&(a.cc(0,"div",4),a.cc(1,"div",5),a.cc(2,"h1"),a.Uc(3," Proyectos "),a.bc(),a.bc(),a.cc(4,"div",6),a.Sc(5,Pe,10,12,"div",7),a.bc(),a.bc()),2&e){const e=a.rc();a.Fb(5),a.zc("ngForOf",e.projects)}}function Oe(e,t){1&e&&(a.cc(0,"div",14),a.Xb(1,"div",15),a.bc())}const ke=[{path:"",component:(()=>{class e{constructor(e,t,n){this.projectsService=e,this.router=t,this.notifService=n,this.isLoading=!1}ngOnInit(){this.getProjects()}onProjectSelected(e){this.router.navigate(["/proyectos",e.id],{state:{project:e}})}getProjects(){this.isLoading=!0,this.projectsService.getAllProjects().subscribe(e=>{this.projects=e,this.isLoading=!1},e=>{console.error("ERROR",e),this.isLoading=!1,this.notifService.unexpectedErrrorEmitted().next()})}onAddNewProject(e){this.projectsService.addProject(e).subscribe(e=>{this.getProjects(),this.projectModal.closeModal(),this.notifService.notificationEmitted().next(["success","Proyecto agregado correctamente"])},e=>{this.projectModal.onError()})}}return e.\u0275fac=function(t){return new(t||e)(a.Wb(m),a.Wb(s.d),a.Wb(l.a))},e.\u0275cmp=a.Qb({type:e,selectors:[["bo-projects"]],viewQuery:function(e,t){var n;1&e&&a.Pc(je,!0),2&e&&a.Ic(n=a.pc())&&(t.projectModal=n.first)},decls:4,vars:2,consts:[[3,"addNewProject"],["addProject",""],["class","container-fluid ml-3",4,"ngIf"],["class","spinner-container",4,"ngIf"],[1,"container-fluid","ml-3"],[1,"title-container"],[1,"projects-container","mb-4"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"project-btn-container"],["canShow","",3,"routerLink","route","state"],[1,"spinner-container"],[1,"spinner"]],template:function(e,t){1&e&&(a.cc(0,"bo-add-project",0,1),a.oc("addNewProject",(function(e){return t.onAddNewProject(e)})),a.bc(),a.Sc(2,we,6,1,"div",2),a.Sc(3,Oe,2,0,"div",3)),2&e&&(a.Fb(2),a.zc("ngIf",!t.isLoading),a.Fb(1),a.zc("ngIf",t.isLoading))},directives:[Ce,i.n,i.m,s.f,ue.a],pipes:[Se],styles:[".projects-container[_ngcontent-%COMP%]{left:0;right:0;margin-left:auto;margin-right:auto;text-align:center;display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,.1fr));grid-gap:2rem}.card[_ngcontent-%COMP%]{padding:10px}  .notification{padding:15px 20px!important;border-radius:5px}  .notification-error{background:#d4533b!important}"]}),e})()},{path:":id",component:fe,canActivate:[n("lDT9").a]}];let Ie=(()=>{class e{}return e.\u0275mod=a.Ub({type:e}),e.\u0275inj=a.Tb({factory:function(t){return new(t||e)},imports:[[s.g.forChild(ke)],s.g]}),e})(),ze=(()=>{class e{}return e.\u0275mod=a.Ub({type:e}),e.\u0275inj=a.Tb({factory:function(t){return new(t||e)},imports:[[i.c,Ie,o.i,o.s,g.b,u.f,u.j,u.b,u.d,c.a]]}),e})()}}]);