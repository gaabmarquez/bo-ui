(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{JZH7:function(e,t,c){"use strict";c.r(t),c.d(t,"GwCobrosModule",(function(){return ft}));var n=c("PCNd"),o=c("Nv++"),r=c("SVse"),i=c("8Y7J"),s=c("G0yt");function d(e,t){1&e&&i.Xb(0,"div",9)}function a(e,t){if(1&e&&(i.cc(0,"span",10),i.Uc(1),i.bc()),2&e){const e=i.rc().$implicit;i.Fb(1),i.Vc(e.description)}}function l(e,t){if(1&e&&(i.cc(0,"section",11),i.Xb(1,"ngx-json-viewer",12),i.bc()),2&e){const e=i.rc().$implicit,t=i.rc();i.Fb(1),i.zc("json",e.value)("expanded",t.expanded)("depth",t.depth)("_currentDepth",t._currentDepth)}}const p=function(e){return["segment",e]},u=function(e,t){return{"segment-main":!0,expandable:e,expanded:t}};function g(e,t){if(1&e){const e=i.dc();i.cc(0,"section",2),i.cc(1,"section",3),i.oc("click",(function(){i.Kc(e);const c=t.$implicit;return i.rc().toggle(c)})),i.Sc(2,d,1,0,"div",4),i.cc(3,"span",5),i.Uc(4),i.bc(),i.cc(5,"span",6),i.Uc(6,": "),i.bc(),i.Sc(7,a,2,1,"span",7),i.bc(),i.Sc(8,l,2,4,"section",8),i.bc()}if(2&e){const e=t.$implicit,c=i.rc();i.zc("ngClass",i.Dc(6,p,"segment-type-"+e.type)),i.Fb(1),i.zc("ngClass",i.Ec(8,u,c.isExpandable(e),e.expanded)),i.Fb(1),i.zc("ngIf",c.isExpandable(e)),i.Fb(2),i.Vc(e.key),i.Fb(3),i.zc("ngIf",!e.expanded||!c.isExpandable(e)),i.Fb(1),i.zc("ngIf",e.expanded&&c.isExpandable(e))}}let b=(()=>{class e{constructor(){this.expanded=!0,this.depth=-1,this._currentDepth=-1,this.segments=[]}ngOnChanges(){this.segments=[],this.json=this.decycle(this.json),this._currentDepth++,"object"==typeof this.json?Object.keys(this.json).forEach(e=>{this.segments.push(this.parseKeyValue(e,this.json[e]))}):this.segments.push(this.parseKeyValue(`(${typeof this.json})`,this.json))}isExpandable(e){return"object"===e.type||"array"===e.type}toggle(e){this.isExpandable(e)&&(e.expanded=!e.expanded)}parseKeyValue(e,t){const c={key:e,value:t,type:void 0,description:""+t,expanded:this.isExpanded()};switch(typeof c.value){case"number":c.type="number";break;case"boolean":c.type="boolean";break;case"function":c.type="function";break;case"string":c.type="string",c.description='"'+c.value+'"';break;case"undefined":c.type="undefined",c.description="undefined";break;case"object":null===c.value?(c.type="null",c.description="null"):Array.isArray(c.value)?(c.type="array",c.description="Array["+c.value.length+"] "+JSON.stringify(c.value)):c.value instanceof Date?c.type="date":(c.type="object",c.description="Object "+JSON.stringify(c.value))}return c}isExpanded(){return this.expanded&&!(this.depth>-1&&this._currentDepth>=this.depth)}decycle(e){const t=new WeakMap;return function e(c,n){let o,r;return"object"!=typeof c||null===c||c instanceof Boolean||c instanceof Date||c instanceof Number||c instanceof RegExp||c instanceof String?c:(o=t.get(c),void 0!==o?{$ref:o}:(t.set(c,n),Array.isArray(c)?(r=[],c.forEach((function(t,c){r[c]=e(t,n+"["+c+"]")}))):(r={},Object.keys(c).forEach((function(t){r[t]=e(c[t],n+"["+JSON.stringify(t)+"]")}))),r))}(e,"$")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Qb({type:e,selectors:[["ngx-json-viewer"]],inputs:{expanded:"expanded",depth:"depth",_currentDepth:"_currentDepth",json:"json"},features:[i.Db],decls:2,vars:1,consts:[[1,"ngx-json-viewer"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[3,"ngClass","click"],["class","toggler",4,"ngIf"],[1,"segment-key"],[1,"segment-separator"],["class","segment-value",4,"ngIf"],["class","children",4,"ngIf"],[1,"toggler"],[1,"segment-value"],[1,"children"],[3,"json","expanded","depth","_currentDepth"]],template:function(e,t){1&e&&(i.cc(0,"section",0),i.Sc(1,g,9,11,"section",1),i.bc()),2&e&&(i.Fb(1),i.zc("ngForOf",t.segments))},directives:[r.m,r.l,r.n,e],styles:['@charset "UTF-8";.ngx-json-viewer[_ngcontent-%COMP%]{font-family:monospace;font-size:1em;height:100%;overflow:hidden;position:relative;width:100%}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]{margin:1px 1px 1px 12px;padding:2px}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]{word-wrap:break-word}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .toggler[_ngcontent-%COMP%]{color:#787878;font-size:.8em;line-height:1.2em;margin-left:-14px;margin-top:3px;position:absolute;vertical-align:middle}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .toggler[_ngcontent-%COMP%]:after{content:"\u25ba";display:inline-block;transition:transform .1s ease-in}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .segment-key[_ngcontent-%COMP%]{color:#4e187c}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .segment-separator[_ngcontent-%COMP%]{color:#999}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .segment-value[_ngcontent-%COMP%]{color:#000}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .children[_ngcontent-%COMP%]{margin-left:12px}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-string[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:#ff6b6b}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-number[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:#009688}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-boolean[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:#b938a4}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-date[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:#05668d}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-array[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%], .ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-function[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%], .ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-object[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:#999}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-null[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%], .ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-undefined[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:#fff}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-null[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{background-color:red}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-undefined[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-key[_ngcontent-%COMP%]{color:#999}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-undefined[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{background-color:#999}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-array[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%], .ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-object[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%]{white-space:nowrap}.ngx-json-viewer[_ngcontent-%COMP%]   .expanded[_ngcontent-%COMP%] > .toggler[_ngcontent-%COMP%]:after{transform:rotate(90deg)}.ngx-json-viewer[_ngcontent-%COMP%]   .expandable[_ngcontent-%COMP%], .ngx-json-viewer[_ngcontent-%COMP%]   .expandable[_ngcontent-%COMP%] > .toggler[_ngcontent-%COMP%]{cursor:pointer}']}),e})(),h=(()=>{class e{}return e.\u0275mod=i.Ub({type:e}),e.\u0275inj=i.Tb({factory:function(t){return new(t||e)},imports:[[r.c]]}),e})();const m=["content"];function f(e,t){if(1&e&&i.Xb(0,"ngx-json-viewer",15),2&e){const e=i.rc(2);i.zc("json",e.sertaconParameters)}}function v(e,t){1&e&&(i.cc(0,"label"),i.Uc(1,"null"),i.bc())}function P(e,t){if(1&e&&i.Xb(0,"ngx-json-viewer",15),2&e){const e=i.rc(2);i.zc("json",e.sertaconResult)}}function C(e,t){1&e&&(i.cc(0,"label"),i.Uc(1,"null"),i.bc())}function F(e,t){if(1&e&&i.Xb(0,"ngx-json-viewer",15),2&e){const e=i.rc(2);i.zc("json",e.clientParameters)}}function M(e,t){1&e&&(i.cc(0,"label"),i.Uc(1,"null"),i.bc())}function O(e,t){if(1&e&&(i.cc(0,"div",1),i.cc(1,"h1",2),i.Uc(2,"Transacci\xf3n "),i.cc(3,"span",3),i.Uc(4),i.bc(),i.bc(),i.cc(5,"button",4),i.oc("click",(function(){return t.$implicit.dismiss()})),i.cc(6,"span",5),i.Uc(7,"\xd7"),i.bc(),i.bc(),i.bc(),i.cc(8,"div",6),i.cc(9,"div",7),i.cc(10,"div",8),i.cc(11,"div",9),i.cc(12,"div",10),i.cc(13,"label",2),i.Uc(14,"M\xf3vil"),i.bc(),i.cc(15,"label",11),i.Uc(16),i.bc(),i.bc(),i.cc(17,"div",10),i.cc(18,"label",2),i.Uc(19,"ID Proveedor"),i.bc(),i.cc(20,"label",11),i.Uc(21),i.bc(),i.bc(),i.cc(22,"div",10),i.cc(23,"label",2),i.Uc(24,"Estado GATEWAY "),i.bc(),i.cc(25,"label",11),i.Uc(26),i.bc(),i.bc(),i.cc(27,"div",10),i.cc(28,"label",2),i.Uc(29,"C\xf3digo de estado GW "),i.bc(),i.cc(30,"label",11),i.Uc(31),i.bc(),i.bc(),i.cc(32,"div",10),i.cc(33,"label",2),i.Uc(34,"Id de cobro "),i.bc(),i.cc(35,"label",11),i.Uc(36),i.bc(),i.bc(),i.cc(37,"div",10),i.cc(38,"label",2),i.Uc(39,"C\xf3digo de estado proveedor "),i.bc(),i.cc(40,"label",11),i.Uc(41),i.bc(),i.bc(),i.cc(42,"div",10),i.cc(43,"label",2),i.Uc(44,"Valorado "),i.bc(),i.cc(45,"label",11),i.Uc(46),i.bc(),i.bc(),i.cc(47,"div",10),i.cc(48,"label",2),i.Uc(49,"Cobro Parcial "),i.bc(),i.cc(50,"label",11),i.Uc(51),i.bc(),i.bc(),i.cc(52,"div",10),i.cc(53,"label",2),i.Uc(54,"Monto solicitado "),i.bc(),i.cc(55,"label",11),i.Uc(56),i.bc(),i.bc(),i.cc(57,"div",10),i.cc(58,"label",2),i.Uc(59,"Monto cobrado "),i.bc(),i.cc(60,"label",11),i.Uc(61),i.bc(),i.bc(),i.cc(62,"div",10),i.cc(63,"label",2),i.Uc(64,"Fecha inicio "),i.bc(),i.cc(65,"label",11),i.Uc(66),i.bc(),i.bc(),i.cc(67,"div",10),i.cc(68,"label",2),i.Uc(69,"Fecha fin "),i.bc(),i.cc(70,"label",11),i.Uc(71),i.bc(),i.bc(),i.cc(72,"div",10),i.cc(73,"label",2),i.Uc(74,"Fecha modificado "),i.bc(),i.cc(75,"label",11),i.Uc(76),i.bc(),i.bc(),i.bc(),i.cc(77,"div",12),i.cc(78,"div",10),i.cc(79,"label",2),i.Uc(80,"Par\xe1metros Sertacon "),i.bc(),i.Sc(81,f,1,1,"ngx-json-viewer",13),i.Sc(82,v,2,0,"label",14),i.bc(),i.cc(83,"div",10),i.cc(84,"label",2),i.Uc(85,"Resultado Sertacon "),i.bc(),i.Sc(86,P,1,1,"ngx-json-viewer",13),i.Sc(87,C,2,0,"label",14),i.bc(),i.cc(88,"div",10),i.cc(89,"label",2),i.Uc(90,"Par\xe1metros del Proveedor "),i.bc(),i.Sc(91,F,1,1,"ngx-json-viewer",13),i.Sc(92,M,2,0,"label",14),i.bc(),i.bc(),i.bc(),i.bc(),i.bc()),2&e){const e=i.rc();i.Fb(4),i.Wc(" ",null==e.transaction?null:e.transaction.transactionId," "),i.Fb(12),i.Vc(e.transaction.userId),i.Fb(5),i.Vc(e.transaction.providerId),i.Fb(5),i.Vc(e.transaction.status),i.Fb(5),i.Vc(e.transaction.statusCode),i.Fb(5),i.Vc(e.transaction.code),i.Fb(5),i.Vc(e.transaction.clientStatusCode),i.Fb(5),i.Vc(e.transaction.valued),i.Fb(5),i.Wc(" ",e.transaction.partialCharge?"Habilitado":"Deshabilitado",""),i.Fb(5),i.Vc(e.transaction.requestedAmount),i.Fb(5),i.Vc(e.transaction.chargedAmount),i.Fb(5),i.Vc(e.transaction.startTime),i.Fb(5),i.Vc(e.transaction.endTime),i.Fb(5),i.Vc(e.transaction.modifiedTime),i.Fb(5),i.zc("ngIf",e.sertaconParameters),i.Fb(1),i.zc("ngIf",!e.sertaconParameters),i.Fb(4),i.zc("ngIf",e.sertaconResult),i.Fb(1),i.zc("ngIf",!e.sertaconResult),i.Fb(4),i.zc("ngIf",e.clientParameters),i.Fb(1),i.zc("ngIf",!e.clientParameters)}}let y=(()=>{class e{constructor(e){this.modalService=e}ngOnInit(){}onOpen(e){this.transaction=e,this.clientParameters=e.clientParameters?JSON.parse(e.clientParameters):void 0,this.sertaconParameters=e.sertaconParameters?JSON.parse(e.sertaconParameters):void 0,this.sertaconResult=e.sertaconResult?JSON.parse(e.sertaconResult):void 0,this.modalReference=this.modalService.open(this.content,{ariaLabelledBy:"modal-basic-title",size:"xl",windowClass:"test-g"})}}return e.\u0275fac=function(t){return new(t||e)(i.Wb(s.e))},e.\u0275cmp=i.Qb({type:e,selectors:[["bo-transaction-detail"]],viewQuery:function(e,t){var c;1&e&&i.Pc(m,!0),2&e&&i.Ic(c=i.pc())&&(t.content=c.first)},decls:2,vars:0,consts:[["content",""],[1,"modal-header"],[1,"title"],[1,"transaction-id"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","mh-150"],[1,"container-fluid","ml-3"],[1,"transaction-container"],[1,"simple-info"],[1,"grouped-info"],[1,"info"],[1,"complex-info"],[3,"json",4,"ngIf"],[4,"ngIf"],[3,"json"]],template:function(e,t){1&e&&i.Sc(0,O,93,20,"ng-template",null,0,i.Tc)},directives:[r.n,b],styles:[".transaction-id[_ngcontent-%COMP%]{font-weight:400;font-style:italic}.transaction-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:flex-start}.simple-info[_ngcontent-%COMP%]{max-width:45%}.complex-info[_ngcontent-%COMP%], .simple-info[_ngcontent-%COMP%]{border:1px solid #cdcdcd;border-radius:5px;padding:20px;margin:20px 5px;min-width:45%}.grouped-info[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;padding:10px 5px}.grouped-info[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{font-size:13px;padding:10px 5px;border:1px dashed #cdcdcd;border-radius:5px;display:block;text-align:center}.plain-text[_ngcontent-%COMP%]{resize:vertical;background-color:#fff;width:100%;min-height:200px;border-color:#cdcdcd;padding:10px}"]}),e})();var w=c("wHSu"),S=c("XNiG"),_=c("Kj3r"),I=c("AytR"),x=c("IheW");let z=(()=>{class e{constructor(e){this.http=e}getAllProducts(e){return this.http.get(`${I.a.baseUrl}/orchestrator/products?${e}`)}getProductById(e){return this.http.get(`${I.a.baseUrl}/orchestrator/products/${e}`)}addProduct(e){return this.http.post(I.a.baseUrl+"/orchestrator/products/",e)}editProduct(e){return this.http.put(`${I.a.baseUrl}/orchestrator/products/${e.id}`,e)}deleteProduct(e){return this.http.delete(`${I.a.baseUrl}/orchestrator/products/${e}`)}downloadReport(e){return this.http.get(`${I.a.baseUrl}/orchestrator/products/export?${e}`,{responseType:"blob"})}}return e.\u0275fac=function(t){return new(t||e)(i.kc(x.c))},e.\u0275prov=i.Sb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var U=c("AehT"),T=c("wuvN"),D=c("s7LF"),k=c("d2bA");let E=(()=>{class e{constructor(e){this.http=e}getCobrosEndpointById(e){return this.http.get(`${I.a.baseUrl}/${e}/status`)}updateCobrosEndpointStatus(e,t){return this.http.post(`${I.a.baseUrl}/${e}/${t}`,{})}getAllProviders(e){return this.http.get(`${I.a.baseUrl}/authserver/providers?${e}`)}getProviderById(e){return this.http.get(`${I.a.baseUrl}/authserver/providers/${e}`)}getProviderByDisplayName(e,t){return this.http.get(`${I.a.baseUrl}/authserver/providers?displayName=${e}&${t}`)}downloadProvidersReport(){return this.http.get(I.a.baseUrl+"/orchestrator/providers/export",{responseType:"blob"})}downloadProviderReportById(e){return this.http.get(`${I.a.baseUrl}/orchestrator/providers/${e}/export`,{responseType:"blob"})}addProvider(e){return this.http.post(I.a.baseUrl+"/authserver/providers",e)}updateProvider(e){return this.http.put(`${I.a.baseUrl}/authserver/providers/${e.id}`,e)}deleteProvider(e){return this.http.delete(`${I.a.baseUrl}/authserver/providers/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(i.kc(x.c))},e.\u0275prov=i.Sb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const A=["content"];function $(e,t){if(1&e&&(i.cc(0,"p",37),i.Uc(1),i.bc()),2&e){const e=i.rc(2);i.Fb(1),i.Wc(" ",e.productForm.get("code").value," ")}}const N=function(e){return{"is-invalid":e}};function V(e,t){if(1&e&&i.Xb(0,"input",38),2&e){const e=i.rc(2);i.zc("ngClass",i.Dc(1,N,e.productForm.get("code").touched&&e.productForm.get("code").errors))}}function j(e,t){1&e&&(i.cc(0,"div",39),i.Uc(1," Id de cobro es un campo requerido "),i.bc())}function K(e,t){if(1&e){const e=i.dc();i.cc(0,"input",40),i.oc("keyup",(function(t){return i.Kc(e),i.rc(2).onProviderSearch(t.target.value)})),i.bc()}}function q(e,t){if(1&e){const e=i.dc();i.cc(0,"div",41),i.cc(1,"label"),i.Uc(2),i.bc(),i.cc(3,"fa-icon",42),i.oc("click",(function(){return i.Kc(e),i.rc(2).clearProvider()})),i.bc(),i.bc()}if(2&e){const e=i.rc(2);i.Fb(2),i.Vc(e.productForm.get("prov").value),i.Fb(1),i.zc("icon",e.faTimesCircle)}}function R(e,t){if(1&e&&(i.cc(0,"option"),i.Uc(1),i.bc()),2&e){const e=t.$implicit;i.Fb(1),i.Xc(" ",e.displayName,", ",e.id," ")}}function L(e,t){if(1&e){const e=i.dc();i.cc(0,"select",43),i.oc("change",(function(t){return i.Kc(e),i.rc(2).onProviderSelected(t.target.value)})),i.Sc(1,R,2,2,"option",21),i.bc()}if(2&e){const e=i.rc(2);i.zc("ngClass",i.Dc(2,N,e.productForm.get("prov").touched&&e.productForm.get("prov").errors)),i.Fb(1),i.zc("ngForOf",e.providers)}}function W(e,t){1&e&&(i.cc(0,"div",39),i.Uc(1," Provider es un campo requerido "),i.bc())}function B(e,t){1&e&&(i.cc(0,"div",39),i.Uc(1," Service Provider Id es un campo requerido "),i.bc())}function X(e,t){1&e&&(i.cc(0,"div",39),i.Uc(1," Content Type Id es un campo requerido "),i.bc())}function Q(e,t){1&e&&(i.cc(0,"div",39),i.Uc(1," Content Id es un campo requerido "),i.bc())}function G(e,t){1&e&&(i.cc(0,"div",39),i.Uc(1," Unidades es un campo requerido "),i.bc())}function Y(e,t){if(1&e&&(i.cc(0,"option"),i.Uc(1),i.bc()),2&e){const e=t.$implicit;i.Fb(1),i.Vc(e)}}function J(e,t){1&e&&(i.cc(0,"div",39),i.Uc(1," Precio es un campo requerido "),i.bc())}function H(e,t){if(1&e&&(i.cc(0,"option"),i.Uc(1),i.bc()),2&e){const e=t.$implicit;i.Fb(1),i.Vc(e)}}function Z(e,t){if(1&e&&(i.cc(0,"option"),i.Uc(1),i.bc()),2&e){const e=t.$implicit;i.Fb(1),i.Vc(e)}}function ee(e,t){1&e&&(i.cc(0,"div",39),i.Uc(1," Carga M\xednima es un campo requerido "),i.bc())}function te(e,t){1&e&&(i.cc(0,"div",39),i.Uc(1," Descripci\xf3n es un campo requerido "),i.bc())}function ce(e,t){if(1&e&&i.Xb(0,"fa-icon",44),2&e){const e=i.rc(2);i.zc("icon",e.faSpinner)("spin",!0)}}const ne=function(e){return{required:e}};function oe(e,t){if(1&e){const e=i.dc();i.cc(0,"div",1),i.cc(1,"h4",2),i.Uc(2),i.bc(),i.bc(),i.cc(3,"div",3),i.cc(4,"form",4),i.cc(5,"div",5),i.cc(6,"div",6),i.cc(7,"label",7),i.Uc(8,"Id de cobro"),i.bc(),i.Sc(9,$,2,1,"p",8),i.Sc(10,V,1,3,"input",9),i.Sc(11,j,2,0,"div",10),i.bc(),i.cc(12,"div",6),i.cc(13,"label",11),i.Uc(14,"Provider"),i.bc(),i.Sc(15,K,1,0,"input",12),i.Sc(16,q,4,2,"div",13),i.Sc(17,L,2,4,"select",14),i.Sc(18,W,2,0,"div",10),i.bc(),i.cc(19,"div",6),i.cc(20,"label",11),i.Uc(21,"Service Provider Id"),i.bc(),i.Xb(22,"input",15),i.Sc(23,B,2,0,"div",10),i.bc(),i.bc(),i.cc(24,"div",5),i.cc(25,"div",6),i.cc(26,"label",11),i.Uc(27,"Content Type"),i.bc(),i.Xb(28,"input",16),i.Sc(29,X,2,0,"div",10),i.bc(),i.cc(30,"div",6),i.cc(31,"label",11),i.Uc(32,"Content ID"),i.bc(),i.Xb(33,"input",17),i.Sc(34,Q,2,0,"div",10),i.bc(),i.cc(35,"div",6),i.cc(36,"label",18),i.Uc(37,"Unidades"),i.bc(),i.Xb(38,"input",19),i.Sc(39,G,2,0,"div",10),i.bc(),i.bc(),i.cc(40,"div",5),i.cc(41,"div",6),i.cc(42,"label",11),i.Uc(43,"Valorado"),i.bc(),i.cc(44,"select",20),i.oc("change",(function(t){return i.Kc(e),i.rc().valuedSelected(t.target.value)})),i.Sc(45,Y,2,1,"option",21),i.bc(),i.bc(),i.cc(46,"div",6),i.cc(47,"label",18),i.Uc(48,"Precio en pesos uruguayos"),i.bc(),i.Xb(49,"input",22),i.Sc(50,J,2,0,"div",10),i.bc(),i.cc(51,"div",6),i.cc(52,"label",11),i.Uc(53,"Plan"),i.bc(),i.cc(54,"select",23),i.Sc(55,H,2,1,"option",21),i.bc(),i.bc(),i.bc(),i.cc(56,"div",5),i.cc(57,"div",6),i.cc(58,"label",11),i.Uc(59,"Charge Interface "),i.bc(),i.cc(60,"select",24),i.Sc(61,Z,2,1,"option",21),i.bc(),i.bc(),i.cc(62,"div",6),i.cc(63,"label",11),i.Uc(64,"Fecha desde"),i.bc(),i.Xb(65,"input",25),i.bc(),i.cc(66,"div",6),i.cc(67,"label",26),i.Uc(68,"Carga M\xednima"),i.bc(),i.Xb(69,"input",27),i.Sc(70,ee,2,0,"div",10),i.bc(),i.bc(),i.cc(71,"div",5),i.cc(72,"div",6),i.cc(73,"div",28),i.cc(74,"span"),i.Uc(75,"Carga Parcial: "),i.bc(),i.cc(76,"input",29),i.oc("change",(function(t){return i.Kc(e),i.rc().partialChargeChanged(t.target.checked)})),i.bc(),i.bc(),i.bc(),i.cc(77,"div",6),i.cc(78,"div",28),i.cc(79,"span"),i.Uc(80,"Activo: "),i.bc(),i.Xb(81,"input",30),i.bc(),i.bc(),i.bc(),i.cc(82,"div",5),i.cc(83,"div",31),i.cc(84,"label",11),i.Uc(85,"Descripci\xf3n"),i.bc(),i.cc(86,"textarea",32),i.Uc(87,"                    "),i.bc(),i.Sc(88,te,2,0,"div",10),i.bc(),i.bc(),i.bc(),i.bc(),i.cc(89,"div",33),i.cc(90,"button",34),i.oc("click",(function(){return t.$implicit.dismiss()})),i.Uc(91,"Cancelar"),i.bc(),i.cc(92,"button",35),i.oc("click",(function(){return i.Kc(e),i.rc().emitCreated()})),i.Uc(93," Confirmar "),i.Sc(94,ce,1,2,"fa-icon",36),i.bc(),i.bc()}if(2&e){const e=i.rc();i.Fb(2),i.Xc(" ",e.isEditing?"Editar ":"Agregar nuevo "," producto ",e.isEditing?"("+(null==e.productForm.controls.id?null:e.productForm.controls.id.value)+")"+(null==e.productForm.controls.description?null:e.productForm.controls.description.value):""," "),i.Fb(2),i.zc("formGroup",e.productForm),i.Fb(5),i.zc("ngIf",e.isEditing),i.Fb(1),i.zc("ngIf",!e.isEditing),i.Fb(1),i.zc("ngIf",e.productForm.get("code").touched&&e.productForm.get("code").errors&&e.productForm.get("code").errors.required),i.Fb(4),i.zc("ngIf",!e.providerSelected),i.Fb(1),i.zc("ngIf",e.providerSelected),i.Fb(1),i.zc("ngIf",e.providers.length>0&&!e.providerSelected),i.Fb(1),i.zc("ngIf",e.productForm.get("prov").touched&&e.productForm.get("prov").errors&&e.productForm.get("prov").errors.required),i.Fb(4),i.zc("ngClass",i.Dc(37,N,e.productForm.get("serviceProviderId").touched&&e.productForm.get("serviceProviderId").errors)),i.Fb(1),i.zc("ngIf",e.productForm.get("serviceProviderId").touched&&e.productForm.get("serviceProviderId").errors&&e.productForm.get("serviceProviderId").errors.required),i.Fb(5),i.zc("ngClass",i.Dc(39,N,e.productForm.get("contentType").touched&&e.productForm.get("contentType").errors)),i.Fb(1),i.zc("ngIf",e.productForm.get("contentType").touched&&e.productForm.get("contentType").errors&&e.productForm.get("contentType").errors.required),i.Fb(4),i.zc("ngClass",i.Dc(41,N,e.productForm.get("contentId").touched&&e.productForm.get("contentId").errors)),i.Fb(1),i.zc("ngIf",e.productForm.get("contentId").touched&&e.productForm.get("contentId").errors&&e.productForm.get("contentId").errors.required),i.Fb(2),i.zc("ngClass",i.Dc(43,ne,"NON_VALUED"==e.productForm.get("valued").value)),i.Fb(2),i.zc("ngClass",i.Dc(45,N,e.productForm.get("units").touched&&e.productForm.get("units").errors)),i.Fb(1),i.zc("ngIf",e.productForm.get("units").touched&&e.productForm.get("units").errors&&e.productForm.get("units").errors.required),i.Fb(5),i.zc("ngClass",i.Dc(47,N,e.productForm.get("valued").touched&&e.productForm.get("valued").errors)),i.Fb(1),i.zc("ngForOf",e.valuedOptions),i.Fb(2),i.zc("ngClass",i.Dc(49,ne,"GATEWAY"==e.productForm.get("valued").value)),i.Fb(2),i.zc("ngClass",i.Dc(51,N,e.productForm.get("productPrice").touched&&e.productForm.get("productPrice").errors)),i.Fb(1),i.zc("ngIf",e.productForm.get("productPrice").touched&&e.productForm.get("productPrice").errors&&e.productForm.get("productPrice").errors.required),i.Fb(4),i.zc("ngClass",i.Dc(53,N,e.productForm.get("plan").touched&&e.productForm.get("plan").errors)),i.Fb(1),i.zc("ngForOf",e.plans),i.Fb(5),i.zc("ngClass",i.Dc(55,N,e.productForm.get("chargeInterface").touched&&e.productForm.get("chargeInterface").errors)),i.Fb(1),i.zc("ngForOf",e.interfaces),i.Fb(4),i.zc("value",e.today),i.Fb(2),i.zc("ngClass",i.Dc(57,ne,1==e.productForm.get("partialCharge").value)),i.Fb(2),i.zc("ngClass",i.Dc(59,N,e.productForm.get("minimumCharge").touched&&e.productForm.get("minimumCharge").errors)),i.Fb(1),i.zc("ngIf",e.productForm.get("minimumCharge").touched&&e.productForm.get("minimumCharge").errors&&e.productForm.get("minimumCharge").errors.required),i.Fb(16),i.zc("ngClass",i.Dc(61,N,e.productForm.get("description").touched&&e.productForm.get("description").errors)),i.Fb(2),i.zc("ngIf",e.productForm.get("description").touched&&e.productForm.get("description").errors&&e.productForm.get("description").errors.required),i.Fb(2),i.zc("disabled",e.isSending),i.Fb(2),i.zc("disabled",e.isSending||!e.productForm.valid),i.Fb(2),i.zc("ngIf",e.isSending)}}let re=(()=>{class e{constructor(e,t,c){this.modalService=e,this.cobrosService=t,this.formBuilder=c,this.isEditing=!1,this.isSending=!1,this.faSpinner=w.k,this.faTimesCircle=w.n,this.providerSelected=!1,this.providers=[],this.addNewProduct=new i.n,this.editProduct=new i.n,this.valuedOptions=["EXTERNAL","GATEWAY","NON_VALUED"],this.interfaces=["HTTP_REST"],this.plans=["All","CtaCda","Multilinea","Multilinea Bolsa","Prepago","Regular"]}ngOnInit(){const e=new Date;this.today=`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`,this.productForm=this.formBuilder.group({code:new D.d("",[D.u.required]),prov:new D.d("",[D.u.required]),serviceProviderId:new D.d("",[D.u.required]),contentType:new D.d("",[D.u.required]),contentId:new D.d("",[D.u.required]),units:new D.d(""),valued:new D.d("",[D.u.required]),productPrice:new D.d(""),plan:new D.d("",[D.u.required]),chargeInterface:new D.d("",[D.u.required]),dateSince:new D.d(this.today,[D.u.required]),partialCharge:new D.d(!1,[D.u.required]),minimumCharge:new D.d(""),active:new D.d(!0,[D.u.required]),description:new D.d("",[D.u.required]),id:new D.d("")})}handleModal(){this.modalReference=this.modalService.open(this.content,{ariaLabelledBy:"modal-basic-title",beforeDismiss:()=>this.clearData(),backdrop:"static",size:"xl",windowClass:"test-g"})}onOpen(){this.isEditing=!1,this.productForm.controls.prov.setValue(this.providers[0]),this.productForm.controls.plan.setValue(this.plans[0]),this.productForm.controls.chargeInterface.setValue(this.interfaces[0]),this.productForm.controls.valued.setValue(this.valuedOptions[0]),this.handleModal()}onOpenToEdit(e){this.isEditing=!0,this.productForm.controls.active.setValue(e.active),this.productForm.controls.code.setValue(e.code),this.productForm.controls.contentId.setValue(e.contentId),this.productForm.controls.contentType.setValue(e.contentType),this.productForm.controls.dateSince.setValue(e.dateSince),this.productForm.controls.description.setValue(e.description),this.productForm.controls.id.setValue(e.id),this.productForm.controls.plan.setValue(e.plan),this.productForm.controls.serviceProviderId.setValue(e.serviceProviderId),this.productForm.controls.valued.setValue(e.valued),this.productForm.controls.chargeInterface.setValue(this.interfaces[0]),this.productForm.controls.minimumCharge.setValue(e.minimumCharge),this.productForm.controls.partialCharge.setValue(e.partialCharge),this.productForm.controls.productPrice.setValue(e.price),this.productForm.controls.units.setValue(e.units),this.cobrosService.getProviderById(e.prov).subscribe(e=>{this.providerSelected=!0,this.productForm.controls.prov.setValue(`${e.displayName}, ${e.id}`)},e=>console.log(e)),this.handleModal()}clearData(){return this.productForm.reset(),!0}onProviderSearch(e){e.length>0&&this.getProviders(e)}onProviderSelected(e){this.providerSelected=!0}onProviderSearchFOut(){this.providerSelected||this.clearProvider()}clearProvider(){this.productForm.controls.prov.setValue(void 0),this.providerSelected=!1,this.providers=[]}getProviders(e){this.cobrosService.getProviderByDisplayName(e,"from=0&to=30").subscribe(e=>{if(1==e.users.length){const t=e.users[0].displayName+", "+e.users[0].id;this.productForm.controls.prov.setValue(t),this.onProviderSelected(t)}else this.providers=e.users})}valuedSelected(e){this.productForm.controls.units.setValidators([]),this.productForm.controls.units.updateValueAndValidity(),this.productForm.controls.productPrice.setValidators([]),this.productForm.controls.productPrice.updateValueAndValidity(),"GATEWAY"===e&&(this.productForm.controls.productPrice.setValidators([D.u.required]),this.productForm.controls.productPrice.updateValueAndValidity()),"NON_VALUED"===e&&(this.productForm.controls.units.setValidators([D.u.required]),this.productForm.controls.units.updateValueAndValidity())}partialChargeChanged(e){this.productForm.controls.minimumCharge.setValidators(e?[D.u.required]:[]),this.productForm.controls.minimumCharge.updateValueAndValidity()}emitCreated(){this.isSending=!0;const e={id:this.productForm.controls.id.value,prov:this.productForm.controls.prov.value.split(",")[1],serviceProviderId:this.productForm.controls.serviceProviderId.value,active:this.productForm.controls.active.value,code:this.productForm.controls.code.value,contentId:this.productForm.controls.contentId.value,contentType:this.productForm.controls.contentType.value,dateSince:this.productForm.controls.dateSince.value,description:this.productForm.controls.description.value,plan:this.productForm.controls.plan.value,valued:this.productForm.controls.valued.value,chargeInterface:this.productForm.controls.chargeInterface.value,minimumCharge:this.productForm.controls.minimumCharge.value,partialCharge:this.productForm.controls.partialCharge.value,price:this.productForm.controls.productPrice.value,units:this.productForm.controls.units.value};this.isEditing?this.editProduct.emit(e):this.addNewProduct.emit(e)}closeModal(){this.productForm.reset(),this.providerSelected=!1,this.isSending=!1,this.modalReference.close()}onError(){this.isSending=!1}}return e.\u0275fac=function(t){return new(t||e)(i.Wb(s.e),i.Wb(E),i.Wb(D.c))},e.\u0275cmp=i.Qb({type:e,selectors:[["bo-add-product"]],viewQuery:function(e,t){var c;1&e&&i.Pc(A,!0),2&e&&i.Ic(c=i.pc())&&(t.content=c.first)},outputs:{addNewProduct:"addNewProduct",editProduct:"editProduct"},decls:2,vars:0,consts:[["content",""],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],[1,"modal-body","mh-150"],[3,"formGroup"],[1,"form-row","mt-2","mb-2"],[1,"form-group","col-md-4"],[1,"required"],["class","code",4,"ngIf"],["formControlName","code","type","number","class","form-control","placeholder","Id de cobro",3,"ngClass",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],["for","name",1,"required"],["type","string","class","form-control","placeholder","Provider",3,"keyup",4,"ngIf"],["class","selected-provider",4,"ngIf"],["class","custom-select","formControlName","prov",3,"ngClass","change",4,"ngIf"],["formControlName","serviceProviderId","id","serviceProviderId","type","text","placeholder","Service Provider Id",1,"form-control",3,"ngClass"],["formControlName","contentType","id","contentType","type","text","placeholder","Content Type",1,"form-control",3,"ngClass"],["formControlName","contentId","id","contentId","type","text","placeholder","Content ID",1,"form-control",3,"ngClass"],["for","name",1,"required",3,"ngClass"],["formControlName","units","id","units","type","text","placeholder","Unidades",1,"form-control",3,"ngClass"],["formControlName","valued",1,"custom-select",3,"ngClass","change"],[4,"ngFor","ngForOf"],["formControlName","productPrice","id","productPrice","type","text","placeholder","Precio",1,"form-control",3,"ngClass"],["formControlName","plan",1,"custom-select",3,"ngClass"],["formControlName","chargeInterface",1,"custom-select",3,"ngClass"],["formControlName","dateSince","id","dateSince","type","date","placeholder","dd/mm/yyyy",1,"form-control",3,"value"],["for","name",3,"ngClass"],["formControlName","minimumCharge","id","minimumCharge","type","text","placeholder","Carga M\xednima",1,"form-control",3,"ngClass"],[1,"partial-load"],["type","checkbox","formControlName","partialCharge",3,"change"],["type","checkbox","formControlName","active"],[1,"form-group","col-md-12"],["formControlName","description","id","description","type","text","placeholder","Ingrese una descripci\xf3n",1,"form-control","description",3,"ngClass"],[1,"modal-footer"],[1,"btn","btn-secondary","btn-sm","p-2",3,"disabled","click"],[1,"btn","btn-primary","btn-sm","p-2",3,"disabled","click"],["style","color: #4b555f",3,"icon","spin",4,"ngIf"],[1,"code"],["formControlName","code","type","number","placeholder","Id de cobro",1,"form-control",3,"ngClass"],[1,"invalid-feedback"],["type","string","placeholder","Provider",1,"form-control",3,"keyup"],[1,"selected-provider"],[1,"clear-icon",3,"icon","click"],["formControlName","prov",1,"custom-select",3,"ngClass","change"],[2,"color","#4b555f",3,"icon","spin"]],template:function(e,t){1&e&&i.Sc(0,oe,95,63,"ng-template",null,0,i.Tc)},directives:[D.w,D.o,D.h,r.n,D.b,D.n,D.f,r.l,D.t,r.m,D.a,D.r,o.a,D.q,D.v],styles:['.partial-load[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:10px}.partial-load[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{cursor:pointer}.description[_ngcontent-%COMP%]{min-height:120px;resize:vertical;background-color:#fff;width:100%}.required[_ngcontent-%COMP%]:after{content:"*";color:red;padding-left:10px}.selected-provider[_ngcontent-%COMP%]{margin-top:.5rem}.selected-provider[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:.5rem}.selected-provider[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(2){cursor:pointer}.code[_ngcontent-%COMP%]{margin-top:.5rem}']}),e})();var ie=c("C4D8");const se=["confirmDeleteModal"],de=["addEditProductModal"];function ae(e,t){1&e&&(i.cc(0,"div",29),i.Xb(1,"div",30),i.bc())}function le(e,t){if(1&e){const e=i.dc();i.cc(0,"fa-icon",31),i.oc("click",(function(){return i.Kc(e),i.rc().clearFilter("provider")})),i.bc()}if(2&e){const e=i.rc();i.zc("icon",e.faTimesCircle)}}function pe(e,t){if(1&e){const e=i.dc();i.cc(0,"fa-icon",31),i.oc("click",(function(){return i.Kc(e),i.rc().clearFilter("code")})),i.bc()}if(2&e){const e=i.rc();i.zc("icon",e.faTimesCircle)}}function ue(e,t){if(1&e){const e=i.dc();i.cc(0,"fa-icon",31),i.oc("click",(function(){return i.Kc(e),i.rc().clearFilter("serviceProviderId")})),i.bc()}if(2&e){const e=i.rc();i.zc("icon",e.faTimesCircle)}}function ge(e,t){if(1&e){const e=i.dc();i.cc(0,"fa-icon",31),i.oc("click",(function(){return i.Kc(e),i.rc().clearFilter("contentId")})),i.bc()}if(2&e){const e=i.rc();i.zc("icon",e.faTimesCircle)}}function be(e,t){if(1&e){const e=i.dc();i.cc(0,"fa-icon",31),i.oc("click",(function(){return i.Kc(e),i.rc().clearFilter("contentType")})),i.bc()}if(2&e){const e=i.rc();i.zc("icon",e.faTimesCircle)}}function he(e,t){if(1&e&&(i.cc(0,"option",32),i.Uc(1),i.bc()),2&e){const e=t.$implicit;i.zc("ngValue",e),i.Fb(1),i.Wc(" ",e," por p\xe1gina")}}function me(e,t){if(1&e){const e=i.dc();i.cc(0,"tr",40),i.cc(1,"td"),i.Uc(2),i.bc(),i.cc(3,"td"),i.Uc(4),i.bc(),i.cc(5,"td"),i.Uc(6),i.bc(),i.cc(7,"td"),i.Uc(8),i.bc(),i.cc(9,"td"),i.Uc(10),i.bc(),i.cc(11,"td"),i.Uc(12),i.bc(),i.cc(13,"td"),i.Uc(14),i.bc(),i.cc(15,"td"),i.Uc(16),i.bc(),i.cc(17,"td"),i.Uc(18),i.bc(),i.cc(19,"td"),i.Uc(20),i.bc(),i.cc(21,"td"),i.Uc(22),i.bc(),i.cc(23,"td"),i.cc(24,"fa-icon",41),i.oc("click",(function(){i.Kc(e);const c=t.$implicit;return i.rc(2).onEdit(c)})),i.bc(),i.cc(25,"fa-icon",42),i.oc("click",(function(){i.Kc(e);const c=t.$implicit;return i.rc(2).onDelete(c)})),i.bc(),i.bc(),i.bc()}if(2&e){const e=t.$implicit,c=i.rc(2);i.Fb(2),i.Vc(e.id),i.Fb(2),i.Wc("",e.active," "),i.Fb(2),i.Wc("",e.dateSince," "),i.Fb(2),i.Wc("",e.prov," "),i.Fb(2),i.Wc("",e.code," "),i.Fb(2),i.Wc("",e.description," "),i.Fb(2),i.Wc("",e.plan," "),i.Fb(2),i.Wc("",e.valued," "),i.Fb(2),i.Wc("",e.serviceProviderId," "),i.Fb(2),i.Wc("",e.contentId," "),i.Fb(2),i.Wc("",e.contentType," "),i.Fb(2),i.zc("icon",c.faPencil),i.Fb(1),i.zc("icon",c.faTrash)}}function fe(e,t){if(1&e){const e=i.dc();i.cc(0,"div",33),i.cc(1,"div",34),i.cc(2,"table",35),i.cc(3,"thead"),i.cc(4,"tr"),i.cc(5,"th"),i.Uc(6," ID "),i.cc(7,"bo-sort-column",36),i.oc("newOrder",(function(t){return i.Kc(e),i.rc().changeOrder("id",t)})),i.bc(),i.bc(),i.cc(8,"th"),i.Uc(9," Activo "),i.cc(10,"bo-sort-column",36),i.oc("newOrder",(function(t){return i.Kc(e),i.rc().changeOrder("active",t)})),i.bc(),i.bc(),i.cc(11,"th"),i.Uc(12," Fecha desde "),i.cc(13,"bo-sort-column",36),i.oc("newOrder",(function(t){return i.Kc(e),i.rc().changeOrder("dateSince",t)})),i.bc(),i.bc(),i.cc(14,"th"),i.Uc(15," Proveedor "),i.cc(16,"bo-sort-column",36),i.oc("newOrder",(function(t){return i.Kc(e),i.rc().changeOrder("providerId",t)})),i.bc(),i.bc(),i.cc(17,"th"),i.Uc(18," Id de cobro "),i.cc(19,"bo-sort-column",36),i.oc("newOrder",(function(t){return i.Kc(e),i.rc().changeOrder("code",t)})),i.bc(),i.bc(),i.cc(20,"th"),i.Uc(21," Descripci\xf3n "),i.cc(22,"bo-sort-column",36),i.oc("newOrder",(function(t){return i.Kc(e),i.rc().changeOrder("description",t)})),i.bc(),i.bc(),i.cc(23,"th"),i.Uc(24," Plan "),i.cc(25,"bo-sort-column",36),i.oc("newOrder",(function(t){return i.Kc(e),i.rc().changeOrder("plan",t)})),i.bc(),i.bc(),i.cc(26,"th"),i.Uc(27," Valorado "),i.cc(28,"bo-sort-column",36),i.oc("newOrder",(function(t){return i.Kc(e),i.rc().changeOrder("valued",t)})),i.bc(),i.bc(),i.cc(29,"th"),i.Uc(30," S. Provider ID "),i.cc(31,"bo-sort-column",36),i.oc("newOrder",(function(t){return i.Kc(e),i.rc().changeOrder("serviceProviderId",t)})),i.bc(),i.bc(),i.cc(32,"th"),i.Uc(33," Content ID "),i.cc(34,"bo-sort-column",36),i.oc("newOrder",(function(t){return i.Kc(e),i.rc().changeOrder("contentId",t)})),i.bc(),i.bc(),i.cc(35,"th"),i.Uc(36," Content Type "),i.cc(37,"bo-sort-column",36),i.oc("newOrder",(function(t){return i.Kc(e),i.rc().changeOrder("contentType",t)})),i.bc(),i.bc(),i.cc(38,"th"),i.Uc(39," Acciones "),i.bc(),i.bc(),i.bc(),i.cc(40,"tbody"),i.Sc(41,me,26,13,"tr",37),i.bc(),i.bc(),i.cc(42,"div",38),i.cc(43,"ngb-pagination",39),i.oc("pageChange",(function(t){return i.Kc(e),i.rc().page=t}))("pageChange",(function(){i.Kc(e);const t=i.rc();return t.refreshProducts(t.page)})),i.bc(),i.bc(),i.bc(),i.bc()}if(2&e){const e=i.rc();i.Fb(7),i.zc("sortOrder",e.sorting.id),i.Fb(3),i.zc("sortOrder",e.sorting.active),i.Fb(3),i.zc("sortOrder",e.sorting.dateSince),i.Fb(3),i.zc("sortOrder",e.sorting.providerId),i.Fb(3),i.zc("sortOrder",e.sorting.code),i.Fb(3),i.zc("sortOrder",e.sorting.description),i.Fb(3),i.zc("sortOrder",e.sorting.plan),i.Fb(3),i.zc("sortOrder",e.sorting.valued),i.Fb(3),i.zc("sortOrder",e.sorting.serviceProviderId),i.Fb(3),i.zc("sortOrder",e.sorting.contentId),i.Fb(3),i.zc("sortOrder",e.sorting.contentType),i.Fb(4),i.zc("ngForOf",e.products),i.Fb(2),i.zc("collectionSize",e.collectionSize)("page",e.page)("pageSize",e.pageSize)("maxSize",3)("boundaryLinks",!0)}}function ve(e,t){1&e&&(i.cc(0,"div",43),i.cc(1,"ngb-alert",44),i.Uc(2," No existen proveedores que coincidan con la b\xfasqueda "),i.bc(),i.bc())}let Pe=(()=>{class e{constructor(e,t){this.productsService=e,this.notifService=t,this.page=1,this.collectionSize=0,this.isLoading=!1,this.itemsPerPage=[10,20,30,40,50],this.pageSize=this.itemsPerPage[2],this.filters={serviceProviderId:void 0,contentId:void 0,contentType:void 0,code:void 0,provider:void 0},this.sorts="",this.faTimesCircle=w.n,this.faFileDownload=w.d,this.sorting={id:void 0,active:void 0,dateSince:void 0,providerId:void 0,code:void 0,description:void 0,plan:void 0,valued:void 0,serviceProviderId:void 0,contentId:void 0,contentType:void 0},this.faTrash=w.o,this.faPencil=w.h,this.keyUpFilter=new S.a,this.filterSubscription=this.keyUpFilter.pipe(Object(_.a)(500)).subscribe(e=>{this.getAllProducts()})}ngOnInit(){this.getAllProducts()}getAllProducts(){const e=(this.page-1)*this.pageSize,t=(this.page-1)*this.pageSize+this.pageSize;this.isLoading=!0;const c=this.concatFilter();this.productsService.getAllProducts(`from=${e}&to=${t}&${c}&${this.sorts}`).subscribe(e=>{this.products=e.products,this.collectionSize=e.count,this.isLoading=!1},e=>{this.isLoading=!1,this.notifService.unexpectedErrrorEmitted().next()})}concatFilter(){let e="";for(const t in this.filters)this.filters[t]&&this.filters[t].length>0&&(e+=(e.length>0?"&":"")+`${t}=${this.filters[t]}`);return e}addNewProduct(){this.addEditProductModal.onOpen()}onAddProduct(e){this.productsService.addProduct(e).subscribe(e=>{this.addEditProductModal.closeModal(),this.notifService.notificationEmitted().next(["success","Producto agregado correctamente"]),this.getAllProducts()},e=>{console.log(e)})}onEditProduct(e){this.productsService.editProduct(e).subscribe(e=>{this.addEditProductModal.closeModal(),this.notifService.notificationEmitted().next(["success","Producto editado correctamente"]),this.getAllProducts()},e=>{console.log(e)})}refreshProducts(e){this.page=e,this.getAllProducts()}onKeyUpFilter(e){this.keyUpFilter.next(e)}clearFilter(e){for(const t in this.filters)if(t==e){this.filters[t]=void 0;break}this.page=1,this.getAllProducts()}changeOrder(e,t){this.sorting[e]=t;for(const c in this.sorting)c!=e&&(this.sorting[c]=void 0);this.sorts=t?`orderBy=${e}&desc=${"desc"==t}`:"",this.getAllProducts()}onEdit(e){this.productsService.getProductById(e.id).subscribe(e=>{this.addEditProductModal.onOpenToEdit(e)},e=>this.notifService.unexpectedErrrorEmitted().next())}onDelete(e){this.productToDelete=e,this.confirmDeleteModal.onOpen(`\xbfEst\xe1s seguro que quieres eliminar el producto '${e.description}' ?`)}onConfirmDelete(){this.productsService.deleteProduct(this.productToDelete.id).subscribe(e=>{this.getAllProducts(),this.confirmDeleteModal.closeModal(),this.productToDelete=void 0,this.notifService.notificationEmitted().next(["success","Producto eliminado correctamente"])},e=>{this.notifService.unexpectedErrrorEmitted().next()})}downloadReport(){const e=this.concatFilter();this.productsService.downloadReport(e).subscribe(e=>{const t=new Date,c=new Blob([e],{type:"application/octet-stream"}),n=window.URL.createObjectURL(c);var o=document.createElement("a");const r=t.getMonth()<10?"0"+(t.getMonth()+1):t.getMonth()+1;o.download=`productos_${t.getDate()}_${r}_${t.getFullYear()}.xlsx`,o.href=n,o.click(),o.remove()},e=>{console.log(e),416==e.status?this.notifService.notificationEmitted().next(["error","Error al descargar!\xa0No se puede generar el reporte por exceder la cantidad m\xe1xima de registros."]):this.notifService.unexpectedErrrorEmitted().next()})}onClearFilters(){this.filters={serviceProviderId:void 0,contentId:void 0,contentType:void 0,code:void 0,provider:void 0},this.getAllProducts()}ngOnDestroy(){this.filterSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.Wb(z),i.Wb(U.a))},e.\u0275cmp=i.Qb({type:e,selectors:[["bo-products"]],viewQuery:function(e,t){var c;1&e&&(i.Pc(se,!0),i.Pc(de,!0)),2&e&&(i.Ic(c=i.pc())&&(t.confirmDeleteModal=c.first),i.Ic(c=i.pc())&&(t.addEditProductModal=c.first))},decls:40,vars:16,consts:[[1,"container-fluid","ml-3"],[1,"title-container"],["canShow","","route","/gateway/productos/*",1,"btn","btn-sm","btn-primary","p-2","float-right",3,"click"],[1,"title"],["placement","right","ngbTooltip","Descargar reporte de productos",1,"download",3,"icon","click"],["class","spinner-container",4,"ngIf"],[1,"products-container"],[1,"mb-0","mt-4","ml-0","w-100"],[1,"d-flex","justify-content-between"],[1,"filter"],["type","text","placeholder","Proveedor",1,"form-control",3,"ngModel","ngModelChange","keyup"],["class","clear-icon",3,"icon","click",4,"ngIf"],["type","text","placeholder","Id de Cobro",1,"form-control",3,"ngModel","ngModelChange","keyup"],["type","text","placeholder","S Provider ID",1,"form-control",3,"ngModel","ngModelChange","keyup"],["type","text","placeholder","Content Id",1,"form-control",3,"ngModel","ngModelChange","keyup"],["type","text","placeholder","Content Type",1,"form-control",3,"ngModel","ngModelChange","keyup"],[1,"d-flex","justify-content-end","mt-2"],[1,"btn","btn-secondary","btn-sm","p-2","mt-2",3,"click"],[1,"mb-0","mt-4","d-flex","justify-content-end"],[1,"custom-select",2,"width","auto",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"mb-0","mt-2","ml-0","w-100"],[1,"row"],["class","col-sm-12",4,"ngIf"],["class","mt-4 w-100",4,"ngIf"],[3,"confirm"],["confirmDeleteModal",""],[3,"addNewProduct","editProduct"],["addEditProductModal",""],[1,"spinner-container"],[1,"spinner"],[1,"clear-icon",3,"icon","click"],[3,"ngValue"],[1,"col-sm-12"],[1,"table-responsive"],[1,"table","table-bordered","table-hover"],[3,"sortOrder","newOrder"],["class","provider-row",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","p-2"],[3,"collectionSize","page","pageSize","maxSize","boundaryLinks","pageChange"],[1,"provider-row"],["canShow","","route","/gateway/productos/*","placement","top","ngbTooltip","Editar",1,"action-icon","edit",3,"icon","click"],["canShow","","route","/gateway/productos/*","placement","top","ngbTooltip","Eliminar",1,"action-icon","delete",3,"icon","click"],[1,"mt-4","w-100"],["type","info",1,"no-result"]],template:function(e,t){1&e&&(i.cc(0,"div",0),i.cc(1,"div",1),i.cc(2,"button",2),i.oc("click",(function(){return t.addNewProduct()})),i.Uc(3," Agregar producto "),i.bc(),i.cc(4,"h1",3),i.Uc(5,"Productos "),i.cc(6,"fa-icon",4),i.oc("click",(function(){return t.downloadReport()})),i.bc(),i.bc(),i.bc(),i.Sc(7,ae,2,0,"div",5),i.cc(8,"div",6),i.cc(9,"div",7),i.cc(10,"div",8),i.cc(11,"div",9),i.cc(12,"input",10),i.oc("ngModelChange",(function(e){return t.filters.provider=e}))("keyup",(function(e){return t.onKeyUpFilter(e.target.value)})),i.bc(),i.Sc(13,le,1,1,"fa-icon",11),i.bc(),i.cc(14,"div",9),i.cc(15,"input",12),i.oc("ngModelChange",(function(e){return t.filters.code=e}))("keyup",(function(e){return t.onKeyUpFilter(e.target.value)})),i.bc(),i.Sc(16,pe,1,1,"fa-icon",11),i.bc(),i.cc(17,"div",9),i.cc(18,"input",13),i.oc("ngModelChange",(function(e){return t.filters.serviceProviderId=e}))("keyup",(function(e){return t.onKeyUpFilter(e.target.value)})),i.bc(),i.Sc(19,ue,1,1,"fa-icon",11),i.bc(),i.cc(20,"div",9),i.cc(21,"input",14),i.oc("ngModelChange",(function(e){return t.filters.contentId=e}))("keyup",(function(e){return t.onKeyUpFilter(e.target.value)})),i.bc(),i.Sc(22,ge,1,1,"fa-icon",11),i.bc(),i.cc(23,"div",9),i.cc(24,"input",15),i.oc("ngModelChange",(function(e){return t.filters.contentType=e}))("keyup",(function(e){return t.onKeyUpFilter(e.target.value)})),i.bc(),i.Sc(25,be,1,1,"fa-icon",11),i.bc(),i.bc(),i.bc(),i.cc(26,"div",16),i.cc(27,"button",17),i.oc("click",(function(){return t.onClearFilters()})),i.Uc(28," Limpiar filtros "),i.bc(),i.bc(),i.cc(29,"div",18),i.cc(30,"select",19),i.oc("ngModelChange",(function(e){return t.pageSize=e}))("ngModelChange",(function(){return t.refreshProducts(1)})),i.Sc(31,he,2,2,"option",20),i.bc(),i.bc(),i.cc(32,"div",21),i.cc(33,"div",22),i.Sc(34,fe,44,17,"div",23),i.bc(),i.bc(),i.Sc(35,ve,3,0,"div",24),i.bc(),i.bc(),i.cc(36,"bo-confirm-modal",25,26),i.oc("confirm",(function(){return t.onConfirmDelete()})),i.bc(),i.cc(38,"bo-add-product",27,28),i.oc("addNewProduct",(function(e){return t.onAddProduct(e)}))("editProduct",(function(e){return t.onEditProduct(e)})),i.bc()),2&e&&(i.Fb(6),i.zc("icon",t.faFileDownload),i.Fb(1),i.zc("ngIf",t.isLoading),i.Fb(5),i.zc("ngModel",t.filters.provider),i.Fb(1),i.zc("ngIf",t.filters.provider),i.Fb(2),i.zc("ngModel",t.filters.code),i.Fb(1),i.zc("ngIf",t.filters.code),i.Fb(2),i.zc("ngModel",t.filters.serviceProviderId),i.Fb(1),i.zc("ngIf",t.filters.serviceProviderId),i.Fb(2),i.zc("ngModel",t.filters.contentId),i.Fb(1),i.zc("ngIf",t.filters.contentId),i.Fb(2),i.zc("ngModel",t.filters.contentType),i.Fb(1),i.zc("ngIf",t.filters.contentType),i.Fb(5),i.zc("ngModel",t.pageSize),i.Fb(1),i.zc("ngForOf",t.itemsPerPage),i.Fb(3),i.zc("ngIf",!t.isLoading&&(null==t.products?null:t.products.length)>0),i.Fb(1),i.zc("ngIf",0==(null==t.products?null:t.products.length)&&!t.isLoading))},directives:[T.a,o.a,s.i,r.n,D.b,D.n,D.p,D.t,r.m,k.a,re,D.q,D.v,ie.a,s.g,s.a],styles:["input[_ngcontent-%COMP%], label[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{font-size:14px}h1[_ngcontent-%COMP%]{position:relative;display:inline-block}table[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:14px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{max-width:190px;font-size:13px;padding:12px 8px}.filter[_ngcontent-%COMP%]{width:15%;position:relative}.filter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:inline-block}.filter[_ngcontent-%COMP%]   .clear-icon[_ngcontent-%COMP%]{cursor:pointer;position:absolute;top:5px;right:20px}.action-icon[_ngcontent-%COMP%]{cursor:pointer;margin-right:10px;margin-left:5px;font-size:14px}.action-icon.edit[_ngcontent-%COMP%]:hover{color:#1890ff}.action-icon.delete[_ngcontent-%COMP%]:hover{color:#dc3545}@media (max-width:1440px){.filter[_ngcontent-%COMP%]{width:18%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding:.75rem .5rem!important}}.download[_ngcontent-%COMP%]{font-size:1.5rem;margin-left:20px;position:absolute;top:12px;cursor:pointer}.download[_ngcontent-%COMP%]:hover{color:#1890ff}"]}),e})(),Ce=(()=>{class e{constructor(e){this.http=e}getAllTransactions(e){return this.http.get(`${I.a.baseUrl}/transactions?${e}`)}getTransactionById(e){return this.http.get(`${I.a.baseUrl}/transactions/${e}`)}downloadReport(e){return this.http.get(`${I.a.baseUrl}/transactions/export?${e}`,{responseType:"blob"})}}return e.\u0275fac=function(t){return new(t||e)(i.kc(x.c))},e.\u0275prov=i.Sb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Fe=["confirmDeleteModal"],Me=["transactionDetail"];function Oe(e,t){1&e&&(i.cc(0,"div",36),i.Xb(1,"div",37),i.bc())}function ye(e,t){if(1&e){const e=i.dc();i.cc(0,"fa-icon",38),i.oc("click",(function(){return i.Kc(e),i.rc().clearFilter("transactionId")})),i.bc()}if(2&e){const e=i.rc();i.zc("icon",e.faTimesCircle)}}function we(e,t){if(1&e){const e=i.dc();i.cc(0,"fa-icon",38),i.oc("click",(function(){return i.Kc(e),i.rc().clearFilter("providerId")})),i.bc()}if(2&e){const e=i.rc();i.zc("icon",e.faTimesCircle)}}function Se(e,t){if(1&e){const e=i.dc();i.cc(0,"fa-icon",38),i.oc("click",(function(){return i.Kc(e),i.rc().clearFilter("mobile")})),i.bc()}if(2&e){const e=i.rc();i.zc("icon",e.faTimesCircle)}}function _e(e,t){if(1&e){const e=i.dc();i.cc(0,"fa-icon",38),i.oc("click",(function(){return i.Kc(e),i.rc().clearFilter("contentType")})),i.bc()}if(2&e){const e=i.rc();i.zc("icon",e.faTimesCircle)}}function Ie(e,t){if(1&e&&(i.cc(0,"option",39),i.Uc(1),i.bc()),2&e){const e=t.$implicit;i.zc("ngValue",e),i.Fb(1),i.Wc(" ",e," por p\xe1gina")}}function xe(e,t){if(1&e){const e=i.dc();i.cc(0,"tr",43),i.oc("click",(function(){i.Kc(e);const c=t.$implicit;return i.rc(2).open(c)})),i.cc(1,"td"),i.Uc(2),i.bc(),i.cc(3,"td"),i.Uc(4),i.bc(),i.cc(5,"td"),i.Uc(6),i.bc(),i.cc(7,"td"),i.Uc(8),i.bc(),i.cc(9,"td"),i.Uc(10),i.bc(),i.cc(11,"td"),i.Uc(12),i.bc(),i.cc(13,"td"),i.Uc(14),i.bc(),i.cc(15,"td"),i.Uc(16),i.bc(),i.cc(17,"td"),i.Uc(18),i.bc(),i.cc(19,"td"),i.Uc(20),i.bc(),i.cc(21,"td"),i.Uc(22),i.bc(),i.cc(23,"td"),i.Uc(24),i.bc(),i.cc(25,"td"),i.Uc(26),i.bc(),i.cc(27,"td"),i.Uc(28),i.bc(),i.bc()}if(2&e){const e=t.$implicit;i.Fb(2),i.Vc(e.transactionId),i.Fb(2),i.Wc("",e.providerId," "),i.Fb(2),i.Wc("",e.userId," "),i.Fb(2),i.Wc("",e.status," "),i.Fb(2),i.Wc("",e.statusCode," "),i.Fb(2),i.Wc("",e.code," "),i.Fb(2),i.Wc("",e.valued," "),i.Fb(2),i.Wc("",e.partialCharge?"Habilitado":"Deshabilitado"," "),i.Fb(2),i.Wc("",e.requestedAmount," "),i.Fb(2),i.Wc("",e.chargedAmount," "),i.Fb(2),i.Wc("",e.clientStatusCode," "),i.Fb(2),i.Wc("",e.startTime," "),i.Fb(2),i.Wc("",e.endTime," "),i.Fb(2),i.Wc("",e.modifiedTime," ")}}function ze(e,t){if(1&e){const e=i.dc();i.cc(0,"table",40),i.cc(1,"thead"),i.cc(2,"tr"),i.cc(3,"th"),i.Uc(4," ID Transacci\xf3n "),i.cc(5,"bo-sort-column",41),i.oc("newOrder",(function(t){return i.Kc(e),i.rc().changeOrder("transactionId",t)})),i.bc(),i.bc(),i.cc(6,"th"),i.Uc(7," ID Proveedor "),i.cc(8,"bo-sort-column",41),i.oc("newOrder",(function(t){return i.Kc(e),i.rc().changeOrder("providerId",t)})),i.bc(),i.bc(),i.cc(9,"th"),i.Uc(10," M\xf3vil "),i.cc(11,"bo-sort-column",41),i.oc("newOrder",(function(t){return i.Kc(e),i.rc().changeOrder("userId",t)})),i.bc(),i.bc(),i.cc(12,"th"),i.Uc(13," Estado GATEWAY "),i.cc(14,"bo-sort-column",41),i.oc("newOrder",(function(t){return i.Kc(e),i.rc().changeOrder("status",t)})),i.bc(),i.bc(),i.cc(15,"th"),i.Uc(16," C\xf3digo de estado GW "),i.cc(17,"bo-sort-column",41),i.oc("newOrder",(function(t){return i.Kc(e),i.rc().changeOrder("statusCode",t)})),i.bc(),i.bc(),i.cc(18,"th"),i.Uc(19," Id de cobro "),i.cc(20,"bo-sort-column",41),i.oc("newOrder",(function(t){return i.Kc(e),i.rc().changeOrder("code",t)})),i.bc(),i.bc(),i.cc(21,"th"),i.Uc(22," Valorado "),i.cc(23,"bo-sort-column",41),i.oc("newOrder",(function(t){return i.Kc(e),i.rc().changeOrder("valued",t)})),i.bc(),i.bc(),i.cc(24,"th"),i.Uc(25," Cobro parcial "),i.cc(26,"bo-sort-column",41),i.oc("newOrder",(function(t){return i.Kc(e),i.rc().changeOrder("partialCharge",t)})),i.bc(),i.bc(),i.cc(27,"th"),i.Uc(28," Monto solicitado "),i.cc(29,"bo-sort-column",41),i.oc("newOrder",(function(t){return i.Kc(e),i.rc().changeOrder("requestedAmount",t)})),i.bc(),i.bc(),i.cc(30,"th"),i.Uc(31," Monto cobrado "),i.cc(32,"bo-sort-column",41),i.oc("newOrder",(function(t){return i.Kc(e),i.rc().changeOrder("chargedAmount",t)})),i.bc(),i.bc(),i.cc(33,"th"),i.Uc(34," C\xf3digo de estado proveedor "),i.bc(),i.cc(35,"th"),i.Uc(36," Fecha inicio "),i.cc(37,"bo-sort-column",41),i.oc("newOrder",(function(t){return i.Kc(e),i.rc().changeOrder("startTime",t)})),i.bc(),i.bc(),i.cc(38,"th"),i.Uc(39," Fecha modificado "),i.cc(40,"bo-sort-column",41),i.oc("newOrder",(function(t){return i.Kc(e),i.rc().changeOrder("endTime",t)})),i.bc(),i.bc(),i.cc(41,"th"),i.Uc(42," Fecha modificado "),i.cc(43,"bo-sort-column",41),i.oc("newOrder",(function(t){return i.Kc(e),i.rc().changeOrder("modifiedTime",t)})),i.bc(),i.bc(),i.bc(),i.bc(),i.cc(44,"tbody"),i.Sc(45,xe,29,14,"tr",42),i.bc(),i.bc()}if(2&e){const e=i.rc();i.Fb(5),i.zc("sortOrder",e.sorting.transactionId),i.Fb(3),i.zc("sortOrder",e.sorting.providerId),i.Fb(3),i.zc("sortOrder",e.sorting.userId),i.Fb(3),i.zc("sortOrder",e.sorting.status),i.Fb(3),i.zc("sortOrder",e.sorting.statusCode),i.Fb(3),i.zc("sortOrder",e.sorting.code),i.Fb(3),i.zc("sortOrder",e.sorting.valued),i.Fb(3),i.zc("sortOrder",e.sorting.partialCharge),i.Fb(3),i.zc("sortOrder",e.sorting.requestedAmount),i.Fb(3),i.zc("sortOrder",e.sorting.chargedAmount),i.Fb(5),i.zc("sortOrder",e.sorting.startTime),i.Fb(3),i.zc("sortOrder",e.sorting.endTime),i.Fb(3),i.zc("sortOrder",e.sorting.modifiedTime),i.Fb(2),i.zc("ngForOf",e.transactions)}}function Ue(e,t){1&e&&(i.cc(0,"div",44),i.cc(1,"ngb-alert",45),i.Uc(2," No existen proveedores que coincidan con la b\xfasqueda "),i.bc(),i.bc())}let Te=(()=>{class e{constructor(e,t){this.transactionsService=e,this.notifService=t,this.page=1,this.collectionSize=0,this.isLoading=!1,this.itemsPerPage=[10,20,30,40,50],this.pageSize=this.itemsPerPage[2],this.filters={providerId:void 0,mobile:void 0,transactionId:void 0,contentType:void 0},this.sorts="",this.faTimesCircle=w.n,this.faFileDownload=w.d,this.sorting={transactionId:void 0,providerId:void 0,userId:void 0,status:void 0,statusCode:void 0,code:void 0,valued:void 0,partialCharge:void 0,requestedAmount:void 0,chargedAmount:void 0,startTime:void 0,endTime:void 0,modifiedTime:void 0},this.START_TIME="00:00",this.keyUpFilter=new S.a,this.filterSubscription=this.keyUpFilter.pipe(Object(_.a)(500)).subscribe(e=>{this.page=1,this.getAllTransactions()})}ngOnInit(){const e=new Date;this.today=`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`,this.getAllTransactions(),this.fromDateTime=this.START_TIME,this.fromDateEndTime=this.START_TIME,this.toDateTime=this.START_TIME,this.toDateEndTime=this.START_TIME}getAllTransactions(){if(this.isLoading=!0,this.filters.transactionId&&this.filters.transactionId.length>0)this.transactionsService.getTransactionById(this.filters.transactionId).subscribe(e=>{this.transactions=[e],this.collectionSize=1,this.isLoading=!1},e=>{404!=e.status&&this.notifService.unexpectedErrrorEmitted().next(),this.transactions=[],this.collectionSize=0,this.isLoading=!1});else{let e=this.getQueryParams();this.transactionsService.getAllTransactions(e).subscribe(e=>{this.transactions=e.transactions,this.collectionSize=this.transactions.length>=this.pageSize?this.page*this.pageSize+10:this.page*this.pageSize,this.isLoading=!1},e=>{this.notifService.unexpectedErrrorEmitted().next()})}}getQueryParams(e=!1){const t=(this.page-1)*this.pageSize,c=(this.page-1)*this.pageSize+this.pageSize,n=this.getDateFilter(),o=this.concatFilter();let r=e?"":`from=${t}&to=${c}`;return o.length>0&&(r+="&"+o),this.sorts.length>0&&(r+="&"+this.sorts),n.length>0&&(r+="&"+n),r}getDateFilter(){let e="";return this.fromDate&&(e+="fromStartDateTime="+this.fromDate.replaceAll("-","")+this.fromDateTime.replace(":","")),this.fromDateEnd&&(e+=(e.length>0?"&":"")+"toStartDateTime="+this.fromDateEnd.replaceAll("- ","")+this.fromDateEndTime.replace(":","")),this.toDate&&(e+=(e.length>0?"&":"")+"fromEndDateTime="+this.toDate.replaceAll("-","")+this.toDateTime.replace(":","")),this.toDateEnd&&(e+=(e.length>0?"&":"")+"toEndDateTime="+this.toDateEnd.replaceAll("-","")+this.toDateEndTime.replace(":","")),e}concatFilter(){let e="";for(const t in this.filters)this.filters[t]&&this.filters[t].length>0&&(e+=(e.length>0?"&":"")+`${t}=${this.filters[t]}`);return e}refreshTransactions(e){this.page=e,this.getAllTransactions()}onKeyUpFilter(e){this.keyUpFilter.next(e)}clearFilter(e){for(const t in this.filters)if(t==e){this.filters[t]=void 0;break}this.page=1,this.getAllTransactions()}changeOrder(e,t){this.sorting[e]=t;for(const c in this.sorting)c!=e&&(this.sorting[c]=void 0);t&&(this.sorts=`orderBy=${e}&desc=${"desc"==t}`),this.getAllTransactions()}downloadReport(){let e=this.getQueryParams(!0);this.transactionsService.downloadReport(e).subscribe(e=>{const t=new Date,c=new Blob([e],{type:"application/octet-stream"}),n=window.URL.createObjectURL(c);var o=document.createElement("a");const r=t.getMonth()<10?"0"+(t.getMonth()+1):t.getMonth()+1;o.download=`productos_${t.getDate()}_${r}_${t.getFullYear()}.xlsx`,o.href=n,o.click(),o.remove()},e=>{416==e.status?this.notifService.notificationEmitted().next(["error","Error al descargar!\xa0No se puede generar el reporte por exceder la cantidad m\xe1xima de registros."]):this.notifService.unexpectedErrrorEmitted().next()})}onSearchDateFilters(){this.getAllTransactions()}open(e){this.transactionDetail.onOpen(e)}onClearFilters(){this.resetDateFilters(),this.resetFilters(),this.getAllTransactions()}resetFilters(){this.filters={providerId:void 0,mobile:void 0,transactionId:void 0,contentType:void 0}}resetDateFilters(){this.fromDate=void 0,this.fromDateTime=this.START_TIME,this.fromDateEnd=void 0,this.fromDateEndTime=this.START_TIME,this.toDate=void 0,this.toDateTime=this.START_TIME,this.toDateEnd=void 0,this.toDateEndTime=this.START_TIME}ngOnDestroy(){this.filterSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.Wb(Ce),i.Wb(U.a))},e.\u0275cmp=i.Qb({type:e,selectors:[["bo-transactions"]],viewQuery:function(e,t){var c;1&e&&(i.Pc(Fe,!0),i.Pc(Me,!0)),2&e&&(i.Ic(c=i.pc())&&(t.confirmDeleteModal=c.first),i.Ic(c=i.pc())&&(t.transactionDetail=c.first))},decls:62,vars:27,consts:[[1,"container-fluid","ml-3"],[1,"title-container"],[1,"title"],["placement","right","ngbTooltip","Descargar reporte de transacciones",1,"download",3,"icon","click"],["class","spinner-container",4,"ngIf"],[1,"transactions-container"],[1,"date-filters-container"],[1,"date-filters"],[1,"start-filter"],[1,"compose-date"],["type","date",1,"form-control",3,"ngModel","ngModelChange"],["type","time",3,"ngModel","ngModelChange"],[1,"end-filter"],[1,"d-flex","justify-content-end"],[1,"btn","btn-primary","btn-sm","p-2","mt-2","mr-2",3,"click"],[1,"btn","btn-secondary","btn-sm","p-2","mt-2",3,"click"],[1,"mb-0","mt-4","ml-0","w-100"],[1,"d-flex","justify-content-between"],[1,"filter"],["type","text","placeholder","B\xfasqueda por ID de transacci\xf3n",1,"form-control",3,"ngModel","ngModelChange","keyup"],["class","clear-icon",3,"icon","click",4,"ngIf"],["type","text","placeholder","Proveedor",1,"form-control",3,"ngModel","ngModelChange","keyup"],["type","text","placeholder","Movil",1,"form-control",3,"ngModel","ngModelChange","keyup"],["type","text","placeholder","Content Type",1,"form-control",3,"ngModel","ngModelChange","keyup"],[1,"mb-0","mt-4","d-flex","justify-content-end"],[1,"custom-select",2,"width","auto",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"mb-0","mt-2","ml-0","w-100"],[1,"row"],[1,"col-sm-12"],[1,"table-responsive"],["class","table table-bordered table-hover",4,"ngIf"],[1,"d-flex","justify-content-center","p-2"],[3,"collectionSize","page","pageSize","maxSize","boundaryLinks","pageChange"],["class","mt-4 w-100",4,"ngIf"],["transactionDetail",""],[1,"spinner-container"],[1,"spinner"],[1,"clear-icon",3,"icon","click"],[3,"ngValue"],[1,"table","table-bordered","table-hover"],[3,"sortOrder","newOrder"],["class","transaction-row",3,"click",4,"ngFor","ngForOf"],[1,"transaction-row",3,"click"],[1,"mt-4","w-100"],["type","info",1,"no-result"]],template:function(e,t){1&e&&(i.cc(0,"div",0),i.cc(1,"div",1),i.cc(2,"h1",2),i.Uc(3,"Transacciones "),i.cc(4,"fa-icon",3),i.oc("click",(function(){return t.downloadReport()})),i.bc(),i.bc(),i.bc(),i.Sc(5,Oe,2,0,"div",4),i.cc(6,"p"),i.Uc(7,"Reporte obtenido de la base de datos r\xe9plica de producci\xf3n. "),i.bc(),i.cc(8,"div",5),i.cc(9,"div",6),i.cc(10,"div",7),i.cc(11,"div",8),i.cc(12,"label"),i.Uc(13,"Rango fecha inicio"),i.bc(),i.cc(14,"div",9),i.cc(15,"input",10),i.oc("ngModelChange",(function(e){return t.fromDate=e})),i.bc(),i.cc(16,"input",11),i.oc("ngModelChange",(function(e){return t.fromDateTime=e})),i.bc(),i.bc(),i.cc(17,"div",9),i.cc(18,"input",10),i.oc("ngModelChange",(function(e){return t.fromDateEnd=e})),i.bc(),i.cc(19,"input",11),i.oc("ngModelChange",(function(e){return t.fromDateEndTime=e})),i.bc(),i.bc(),i.bc(),i.bc(),i.cc(20,"div",7),i.cc(21,"div",12),i.cc(22,"label"),i.Uc(23,"Rango fecha fin"),i.bc(),i.cc(24,"div",9),i.cc(25,"input",10),i.oc("ngModelChange",(function(e){return t.toDate=e})),i.bc(),i.cc(26,"input",11),i.oc("ngModelChange",(function(e){return t.toDateTime=e})),i.bc(),i.bc(),i.cc(27,"div",9),i.cc(28,"input",10),i.oc("ngModelChange",(function(e){return t.toDateEnd=e})),i.bc(),i.cc(29,"input",11),i.oc("ngModelChange",(function(e){return t.toDateEndTime=e})),i.bc(),i.bc(),i.bc(),i.bc(),i.bc(),i.cc(30,"div",13),i.cc(31,"button",14),i.oc("click",(function(){return t.onSearchDateFilters()})),i.Uc(32," Aplicar filtro de fechas "),i.bc(),i.cc(33,"button",15),i.oc("click",(function(){return t.onClearFilters()})),i.Uc(34," Limpiar filtros "),i.bc(),i.bc(),i.cc(35,"div",16),i.cc(36,"div",17),i.cc(37,"div",18),i.cc(38,"input",19),i.oc("ngModelChange",(function(e){return t.filters.transactionId=e}))("keyup",(function(e){return t.onKeyUpFilter(e.target.value)})),i.bc(),i.Sc(39,ye,1,1,"fa-icon",20),i.bc(),i.cc(40,"div",18),i.cc(41,"input",21),i.oc("ngModelChange",(function(e){return t.filters.providerId=e}))("keyup",(function(e){return t.onKeyUpFilter(e.target.value)})),i.bc(),i.Sc(42,we,1,1,"fa-icon",20),i.bc(),i.cc(43,"div",18),i.cc(44,"input",22),i.oc("ngModelChange",(function(e){return t.filters.mobile=e}))("keyup",(function(e){return t.onKeyUpFilter(e.target.value)})),i.bc(),i.Sc(45,Se,1,1,"fa-icon",20),i.bc(),i.cc(46,"div",18),i.cc(47,"input",23),i.oc("ngModelChange",(function(e){return t.filters.contentType=e}))("keyup",(function(e){return t.onKeyUpFilter(e.target.value)})),i.bc(),i.Sc(48,_e,1,1,"fa-icon",20),i.bc(),i.bc(),i.bc(),i.cc(49,"div",24),i.cc(50,"select",25),i.oc("ngModelChange",(function(e){return t.pageSize=e}))("ngModelChange",(function(){return t.refreshTransactions(1)})),i.Sc(51,Ie,2,2,"option",26),i.bc(),i.bc(),i.cc(52,"div",27),i.cc(53,"div",28),i.cc(54,"div",29),i.cc(55,"div",30),i.Sc(56,ze,46,14,"table",31),i.cc(57,"div",32),i.cc(58,"ngb-pagination",33),i.oc("pageChange",(function(e){return t.page=e}))("pageChange",(function(){return t.refreshTransactions(t.page)})),i.bc(),i.bc(),i.bc(),i.bc(),i.bc(),i.bc(),i.Sc(59,Ue,3,0,"div",34),i.bc(),i.bc(),i.Xb(60,"bo-transaction-detail",null,35)),2&e&&(i.Fb(4),i.zc("icon",t.faFileDownload),i.Fb(1),i.zc("ngIf",t.isLoading),i.Fb(10),i.zc("ngModel",t.fromDate),i.Fb(1),i.zc("ngModel",t.fromDateTime),i.Fb(2),i.zc("ngModel",t.fromDateEnd),i.Fb(1),i.zc("ngModel",t.fromDateEndTime),i.Fb(6),i.zc("ngModel",t.toDate),i.Fb(1),i.zc("ngModel",t.toDateTime),i.Fb(2),i.zc("ngModel",t.toDateEnd),i.Fb(1),i.zc("ngModel",t.toDateEndTime),i.Fb(9),i.zc("ngModel",t.filters.transactionId),i.Fb(1),i.zc("ngIf",t.filters.transactionId),i.Fb(2),i.zc("ngModel",t.filters.providerId),i.Fb(1),i.zc("ngIf",t.filters.providerId),i.Fb(2),i.zc("ngModel",t.filters.mobile),i.Fb(1),i.zc("ngIf",t.filters.mobile),i.Fb(2),i.zc("ngModel",t.filters.contentType),i.Fb(1),i.zc("ngIf",t.filters.contentType),i.Fb(2),i.zc("ngModel",t.pageSize),i.Fb(1),i.zc("ngForOf",t.itemsPerPage),i.Fb(5),i.zc("ngIf",!t.isLoading&&(null==t.transactions?null:t.transactions.length)>0),i.Fb(2),i.zc("collectionSize",t.collectionSize)("page",t.page)("pageSize",t.pageSize)("maxSize",3)("boundaryLinks",!0),i.Fb(1),i.zc("ngIf",0==(null==t.transactions?null:t.transactions.length)&&!t.isLoading))},directives:[o.a,s.i,r.n,D.b,D.n,D.p,D.t,r.m,s.g,y,D.q,D.v,ie.a,s.a],styles:["input[_ngcontent-%COMP%], label[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{font-size:14px}h1[_ngcontent-%COMP%]{position:relative;display:inline-block}table[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;user-select:none;font-size:13px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:12px;padding:12px 8px;max-width:150px;word-break:break-word}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(2), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(3), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(4), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(9), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(10), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(11){min-width:90px;max-width:120px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(7){word-break:normal}.transaction-row[_ngcontent-%COMP%]{cursor:pointer}.transaction-row[_ngcontent-%COMP%]:hover{background:rgba(26,144,255,.4)}.filter[_ngcontent-%COMP%]{width:15%;position:relative}.filter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:inline-block}.filter[_ngcontent-%COMP%]   .clear-icon[_ngcontent-%COMP%]{cursor:pointer;position:absolute;top:5px;right:20px}.spinner-container[_ngcontent-%COMP%]{top:600px}.action-icon[_ngcontent-%COMP%]{cursor:pointer;margin-right:10px;margin-left:5px;font-size:14px}.action-icon.edit[_ngcontent-%COMP%]:hover{color:#1890ff}.action-icon.delete[_ngcontent-%COMP%]:hover{color:#dc3545}@media (max-width:1440px){.filter[_ngcontent-%COMP%]{width:18%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding:.75rem .5rem!important}}.download[_ngcontent-%COMP%]{font-size:1.5rem;margin-left:20px;position:absolute;top:12px;cursor:pointer}.download[_ngcontent-%COMP%]:hover{color:#1890ff}.date-filters-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.date-filters[_ngcontent-%COMP%]{border-radius:5px;padding:5px 0;width:40%}.date-filters[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}.date-filters[_ngcontent-%COMP%]   .end-filter[_ngcontent-%COMP%], .date-filters[_ngcontent-%COMP%]   .start-filter[_ngcontent-%COMP%]{display:flex;flex-direction:column}.date-filters[_ngcontent-%COMP%]   .end-filter[_ngcontent-%COMP%]   .compose-date[_ngcontent-%COMP%]{justify-content:flex-end}.date-filters[_ngcontent-%COMP%]   .compose-date[_ngcontent-%COMP%]{display:flex;margin:10px 0}.date-filters[_ngcontent-%COMP%]   .compose-date[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(odd){margin-right:10px}  .no-result{margin-left:-15px;margin-top:20px}  .no-result button{display:none}"]}),e})();var De=c("mrSG");const ke=["content"];function Ee(e,t){if(1&e&&(i.cc(0,"label"),i.Uc(1),i.bc()),2&e){const e=i.rc(2);i.Fb(1),i.Wc(" ",e.providerForm.get("providerId").value," ")}}const Ae=function(e){return{"is-invalid":e}};function $e(e,t){if(1&e&&i.Xb(0,"input",20),2&e){const e=i.rc(2);i.zc("ngClass",i.Dc(1,Ae,e.providerForm.get("providerId").touched&&e.providerForm.get("providerId").errors))}}function Ne(e,t){1&e&&(i.cc(0,"div",21),i.Uc(1," ProviderId es un campo requerido "),i.bc())}function Ve(e,t){1&e&&(i.cc(0,"div",21),i.Uc(1," Display name es un campo requerido "),i.bc())}function je(e,t){1&e&&(i.cc(0,"div",21),i.Uc(1," Username es un campo requerido "),i.bc())}function Ke(e,t){1&e&&(i.cc(0,"div",21),i.Uc(1," Contrase\xf1a es un campo requerido "),i.bc())}function qe(e,t){1&e&&(i.cc(0,"div",21),i.Uc(1," La contrase\xf1a debe tener un minimo de 6 caracteres. "),i.bc())}function Re(e,t){1&e&&(i.cc(0,"div",21),i.Uc(1," Debe confirmar su contrase\xf1a "),i.bc())}function Le(e,t){1&e&&(i.cc(0,"div",21),i.Uc(1," Las contrase\xf1as no coinciden"),i.bc())}function We(e,t){if(1&e&&(i.cc(0,"tr"),i.cc(1,"td"),i.Uc(2),i.bc(),i.cc(3,"td"),i.Uc(4),i.bc(),i.cc(5,"td"),i.Uc(6),i.bc(),i.bc()),2&e){const e=t.$implicit;i.Fb(2),i.Vc(e.contentId),i.Fb(2),i.Vc(e.contentType),i.Fb(2),i.Vc(e.serviceProviderId)}}function Be(e,t){if(1&e&&(i.cc(0,"tbody"),i.Sc(1,We,7,3,"tr",25),i.bc()),2&e){const e=i.rc(3);i.Fb(1),i.zc("ngForOf",e.editingProvider.productCodes)}}function Xe(e,t){if(1&e&&(i.cc(0,"div",22),i.cc(1,"label"),i.Uc(2,"Tripletas"),i.bc(),i.cc(3,"div",23),i.cc(4,"table",24),i.cc(5,"thead"),i.cc(6,"tr"),i.cc(7,"th"),i.Uc(8,"Content ID"),i.bc(),i.cc(9,"th"),i.Uc(10,"Content Type"),i.bc(),i.cc(11,"th"),i.Uc(12,"Service Provider ID"),i.bc(),i.bc(),i.bc(),i.Sc(13,Be,2,1,"tbody",7),i.bc(),i.bc(),i.bc()),2&e){const e=i.rc(2);i.Fb(13),i.zc("ngIf",e.editingProvider.productCodes)}}function Qe(e,t){if(1&e&&i.Xb(0,"fa-icon",26),2&e){const e=i.rc(2);i.zc("icon",e.faSpinner)("spin",!0)}}function Ge(e,t){if(1&e){const e=i.dc();i.cc(0,"div",1),i.cc(1,"h4",2),i.Uc(2),i.bc(),i.bc(),i.cc(3,"div",3),i.cc(4,"form",4),i.cc(5,"div",5),i.cc(6,"label",6),i.Uc(7,"Provider Id"),i.bc(),i.Sc(8,Ee,2,1,"label",7),i.Sc(9,$e,1,3,"input",8),i.Sc(10,Ne,2,0,"div",9),i.bc(),i.cc(11,"div",5),i.cc(12,"label",10),i.Uc(13,"Display name"),i.bc(),i.Xb(14,"input",11),i.Sc(15,Ve,2,0,"div",9),i.bc(),i.cc(16,"div",5),i.cc(17,"label",10),i.Uc(18,"Username"),i.bc(),i.Xb(19,"input",12),i.Sc(20,je,2,0,"div",9),i.bc(),i.cc(21,"div",5),i.cc(22,"label",10),i.Uc(23,"Contrase\xf1a"),i.bc(),i.cc(24,"input",13),i.oc("change",(function(t){return i.Kc(e),i.rc().changePassword(t.target.value)})),i.bc(),i.Sc(25,Ke,2,0,"div",9),i.Sc(26,qe,2,0,"div",9),i.bc(),i.cc(27,"div",5),i.cc(28,"label",10),i.Uc(29,"Confirmar Contrase\xf1a"),i.bc(),i.cc(30,"input",14),i.oc("change",(function(t){return i.Kc(e),i.rc().changePassword(t.target.value)})),i.bc(),i.Sc(31,Re,2,0,"div",9),i.Sc(32,Le,2,0,"div",9),i.Sc(33,Xe,14,1,"div",15),i.bc(),i.bc(),i.bc(),i.cc(34,"div",16),i.cc(35,"button",17),i.oc("click",(function(){return t.$implicit.dismiss()})),i.Uc(36,"Cancelar"),i.bc(),i.cc(37,"button",18),i.oc("click",(function(){return i.Kc(e),i.rc().emitCreated()})),i.Uc(38," Confirmar "),i.Sc(39,Qe,1,2,"fa-icon",19),i.bc(),i.bc()}if(2&e){const e=i.rc();i.Fb(2),i.Wc(" ",e.isEditing?"Editar ":"Agregar nuevo "," proveedor "),i.Fb(2),i.zc("formGroup",e.providerForm),i.Fb(4),i.zc("ngIf",e.isEditing),i.Fb(1),i.zc("ngIf",!e.isEditing),i.Fb(1),i.zc("ngIf",e.providerForm.get("providerId").touched&&e.providerForm.get("providerId").errors&&e.providerForm.get("providerId").errors.required),i.Fb(4),i.zc("ngClass",i.Dc(19,Ae,e.providerForm.get("displayName").touched&&e.providerForm.get("displayName").errors)),i.Fb(1),i.zc("ngIf",e.providerForm.get("displayName").touched&&e.providerForm.get("displayName").errors&&e.providerForm.get("displayName").errors.required),i.Fb(4),i.zc("ngClass",i.Dc(21,Ae,e.providerForm.get("username").touched&&e.providerForm.get("username").errors)),i.Fb(1),i.zc("ngIf",e.providerForm.get("username").touched&&e.providerForm.get("username").errors&&e.providerForm.get("username").errors.required),i.Fb(4),i.zc("ngClass",i.Dc(23,Ae,e.providerForm.get("password").touched&&e.providerForm.get("password").errors)),i.Fb(1),i.zc("ngIf",e.providerForm.get("password").touched&&e.providerForm.get("password").errors&&e.providerForm.get("password").errors.required),i.Fb(1),i.zc("ngIf",e.providerForm.get("password").touched&&e.providerForm.get("password").errors&&e.providerForm.get("password").errors.minlength),i.Fb(4),i.zc("ngClass",i.Dc(25,Ae,e.providerForm.get("confirmPassword").touched&&e.providerForm.get("confirmPassword").errors)),i.Fb(1),i.zc("ngIf",e.providerForm.get("confirmPassword").touched&&e.providerForm.get("confirmPassword").errors&&e.providerForm.get("confirmPassword").errors.required),i.Fb(1),i.zc("ngIf",e.providerForm.get("confirmPassword").errors&&e.providerForm.get("confirmPassword").errors.mustMatch),i.Fb(1),i.zc("ngIf",e.isEditing),i.Fb(2),i.zc("disabled",e.isSending),i.Fb(2),i.zc("disabled",e.isSending||!e.providerForm.valid),i.Fb(2),i.zc("ngIf",e.isSending)}}let Ye=(()=>{class e{constructor(e,t){this.modalService=e,this.formBuilder=t,this.isEditing=!1,this.isSending=!1,this.faSpinner=w.k,this.addNewProvider=new i.n,this.editProvider=new i.n}ngOnInit(){this.providerForm=this.formBuilder.group({providerId:new D.d("",[D.u.required]),displayName:new D.d("",[D.u.required]),username:new D.d("",[D.u.required]),password:new D.d("",[D.u.required,D.u.minLength(6)]),confirmPassword:new D.d("",[D.u.required,D.u.minLength(6)])},{validator:e=>{const t=e.controls.confirmPassword;t.setErrors(e.controls.password.value!==t.value?{mustMatch:!0}:null)}})}handleModal(){this.modalReference=this.modalService.open(this.content,{ariaLabelledBy:"modal-basic-title",beforeDismiss:()=>this.clearData(),backdrop:"static",size:"lg"})}onOpen(){this.isEditing=!1,this.handleModal()}onOpenToEdit(e){this.isEditing=!0,this.editingProvider=e,this.providerForm.controls.providerId.setValue(e.id),this.providerForm.controls.username.setValue(e.username),this.providerForm.controls.displayName.setValue(e.displayName),this.providerForm.controls.password.setValidators([]),this.providerForm.controls.confirmPassword.setValidators([]),this.providerForm.controls.password.updateValueAndValidity(),this.providerForm.controls.confirmPassword.updateValueAndValidity(),this.handleModal()}clearData(){return this.providerForm.reset(),this.editingProvider=void 0,!0}emitCreated(){this.isSending=!0;let e={displayName:this.providerForm.controls.displayName.value,username:this.providerForm.controls.username.value,password:this.providerForm.controls.password.value,id:this.providerForm.controls.providerId.value};this.isEditing?this.editProvider.emit(e):this.addNewProvider.emit(e)}changePassword(e){e.length>0||this.providerForm.controls.password.value.length>0||this.providerForm.controls.confirmPassword.value.length>0?(this.providerForm.controls.password.setValidators([D.u.required,D.u.minLength(6)]),this.providerForm.controls.confirmPassword.setValidators([D.u.required,D.u.minLength(6)])):(this.providerForm.controls.password.setValidators([]),this.providerForm.controls.confirmPassword.setValidators([])),this.providerForm.controls.password.updateValueAndValidity(),this.providerForm.controls.confirmPassword.updateValueAndValidity()}closeModal(){this.providerForm.reset(),this.isSending=!1,this.modalReference.close()}onError(){this.isSending=!1}}return e.\u0275fac=function(t){return new(t||e)(i.Wb(s.e),i.Wb(D.c))},e.\u0275cmp=i.Qb({type:e,selectors:[["bo-add-provider"]],viewQuery:function(e,t){var c;1&e&&i.Pc(ke,!0),2&e&&i.Ic(c=i.pc())&&(t.content=c.first)},outputs:{addNewProvider:"addNewProvider",editProvider:"editProvider"},decls:2,vars:0,consts:[["content",""],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],[1,"modal-body","mh-150"],[3,"formGroup"],[1,"form-group"],[1,"font-weight-bold"],[4,"ngIf"],["formControlName","providerId","id","providerId","type","number","class","form-control","placeholder","Provider Id",3,"ngClass",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],["for","name"],["formControlName","displayName","id","displayName","type","text","placeholder","Display name",1,"form-control",3,"ngClass"],["formControlName","username","id","username","type","text","placeholder","Username",1,"form-control",3,"ngClass"],["formControlName","password","id","password","type","password","placeholder","Password",1,"form-control",3,"ngClass","change"],["formControlName","confirmPassword","id","confirmPassword","type","password","placeholder","Confirmar Contrase\xf1a",1,"form-control",3,"ngClass","change"],["class","triplets",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary","btn-sm","p-2",3,"disabled","click"],[1,"btn","btn-primary","btn-sm","p-2",3,"disabled","click"],["style","color: #4b555f",3,"icon","spin",4,"ngIf"],["formControlName","providerId","id","providerId","type","number","placeholder","Provider Id",1,"form-control",3,"ngClass"],[1,"invalid-feedback"],[1,"triplets"],[1,"table-responsive"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],[2,"color","#4b555f",3,"icon","spin"]],template:function(e,t){1&e&&i.Sc(0,Ge,40,27,"ng-template",null,0,i.Tc)},directives:[D.w,D.o,D.h,r.n,D.b,D.n,D.f,r.l,D.r,r.m,o.a],styles:[".triplets[_ngcontent-%COMP%]{margin-top:2rem;margin-bottom:2rem;padding:5px}.triplets[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:1rem}.triplets[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{text-align:center}"]}),e})();const Je=["providerModal"],He=["confirmDeleteModal"];function Ze(e,t){1&e&&(i.cc(0,"div",22),i.Xb(1,"div",23),i.bc())}function et(e,t){if(1&e){const e=i.dc();i.cc(0,"fa-icon",24),i.oc("click",(function(){return i.Kc(e),i.rc().onClearProvider()})),i.bc()}if(2&e){const e=i.rc();i.zc("icon",e.faTimesCircle)}}function tt(e,t){if(1&e){const e=i.dc();i.cc(0,"fa-icon",24),i.oc("click",(function(){return i.Kc(e),i.rc().onClearDisplay()})),i.bc()}if(2&e){const e=i.rc();i.zc("icon",e.faTimesCircle)}}function ct(e,t){if(1&e&&(i.cc(0,"option",25),i.Uc(1),i.Uc(2," por p\xe1gina "),i.bc()),2&e){const e=t.$implicit;i.zc("ngValue",e),i.Fb(1),i.Wc(" ",e," ")}}function nt(e,t){if(1&e){const e=i.dc();i.cc(0,"tr",33),i.oc("click",(function(){i.Kc(e);const c=t.$implicit;return i.rc(2).selectedProvider(c)})),i.cc(1,"td"),i.Uc(2),i.bc(),i.cc(3,"td"),i.Uc(4),i.bc(),i.cc(5,"td"),i.cc(6,"div",34),i.cc(7,"fa-icon",35),i.oc("click",(function(){i.Kc(e);const c=t.$implicit;return i.rc(2).onDownloadProviderReport(c.id)})),i.bc(),i.cc(8,"fa-icon",36),i.oc("click",(function(){i.Kc(e);const c=t.$implicit;return i.rc(2).onEdit(c)})),i.bc(),i.cc(9,"fa-icon",37),i.oc("click",(function(){i.Kc(e);const c=t.$implicit;return i.rc(2).onDelete(c)})),i.bc(),i.bc(),i.bc(),i.bc()}if(2&e){const e=t.$implicit,c=i.rc(2);i.Fb(2),i.Vc(e.id),i.Fb(2),i.Vc(e.displayName),i.Fb(3),i.zc("icon",c.faFileDownload),i.Fb(1),i.zc("icon",c.faPencil),i.Fb(1),i.zc("icon",c.faTrash)}}function ot(e,t){if(1&e){const e=i.dc();i.cc(0,"div",26),i.cc(1,"div",27),i.cc(2,"table",28),i.cc(3,"thead"),i.cc(4,"tr"),i.cc(5,"th",29),i.Uc(6,"ID"),i.bc(),i.cc(7,"th",29),i.Uc(8,"Display name"),i.bc(),i.cc(9,"th",29),i.Uc(10,"Acciones"),i.bc(),i.bc(),i.bc(),i.cc(11,"tbody"),i.Sc(12,nt,10,5,"tr",30),i.bc(),i.bc(),i.cc(13,"div",31),i.cc(14,"ngb-pagination",32),i.oc("pageChange",(function(t){return i.Kc(e),i.rc().page=t}))("pageChange",(function(){i.Kc(e);const t=i.rc();return t.refreshProviders(t.page)})),i.bc(),i.bc(),i.bc(),i.bc()}if(2&e){const e=i.rc();i.Fb(12),i.zc("ngForOf",e.providers),i.Fb(2),i.zc("collectionSize",e.collectionSize)("page",e.page)("pageSize",e.pageSize)("maxSize",3)("boundaryLinks",!0)}}function rt(e,t){1&e&&(i.cc(0,"div",38),i.cc(1,"ngb-alert",39),i.Uc(2," No existen proveedores que coincidan con la b\xfasqueda "),i.bc(),i.bc())}let it=(()=>{class e{constructor(e,t){this.cobrosService=e,this.notifService=t,this.providers=[],this.page=1,this.collectionSize=0,this.isLoading=!1,this.itemsPerPage=[10,20,30,40,50],this.pageSize=this.itemsPerPage[2],this.filters="",this.keyUpProvider=new S.a,this.keyUpDisplayName=new S.a,this.providerId="",this.displayName="",this.faTimesCircle=w.n,this.faFileDownload=w.d,this.faTrash=w.o,this.faPencil=w.h,this.subscriptionProvider=this.keyUpProvider.pipe(Object(_.a)(200)).subscribe(e=>{e.length>0?this.getProviderById():this.getAllProviders()}),this.subscriptionDisplayName=this.keyUpDisplayName.pipe(Object(_.a)(200)).subscribe(e=>{e.length>0?this.getProviderByDisplayName():this.getAllProviders()})}ngOnInit(){this.getAllProviders()}getAllProviders(){const e=(this.page-1)*this.pageSize,t=(this.page-1)*this.pageSize+this.pageSize;this.isLoading=!0,this.cobrosService.getAllProviders(`from=${e}&to=${t}`).subscribe(e=>{this.providers=e.users,this.collectionSize=e.count,this.isLoading=!1},e=>{this.isLoading=!1,this.notifService.unexpectedErrrorEmitted().next()})}getProviderByDisplayName(){const e=(this.page-1)*this.pageSize,t=(this.page-1)*this.pageSize+this.pageSize;this.isLoading=!0,this.cobrosService.getProviderByDisplayName(this.displayName,`from=${e}&to=${t}`).subscribe(e=>{this.providers=e.users,this.collectionSize=e.count,this.isLoading=!1},e=>{this.providers=[],this.isLoading=!1})}getProviderById(){this.isLoading=!0,this.cobrosService.getProviderById(this.providerId).subscribe(e=>{this.providers=[e],this.collectionSize=this.providers.length,this.isLoading=!1},e=>{this.providers=[],this.isLoading=!1})}selectedProvider(e){}onKeyUpProvider(e){this.displayName="",this.keyUpProvider.next(e)}onKeyUpDisplay(e){this.providerId="",this.keyUpDisplayName.next(e)}onClearDisplay(){this.displayName="",this.getAllProviders()}onClearProvider(){this.providerId="",this.getAllProviders()}refreshProviders(e){this.page=e,this.displayName.length>0?this.getProviderByDisplayName():this.providerId.length>0?this.getProviderById():this.getAllProviders()}downloadReport(){this.cobrosService.downloadProvidersReport().subscribe(e=>{const t=new Date,c=new Blob([e],{type:"application/octet-stream"}),n=window.URL.createObjectURL(c);var o=document.createElement("a");const r=t.getMonth()<10?"0"+(t.getMonth()+1):t.getMonth()+1;o.download=`proveedores_${t.getDate()}_${r}_${t.getFullYear()}.xlsx`,o.href=n,o.click(),o.remove()},e=>{416==e.status?this.notifService.notificationEmitted().next(["error","Error al descargar!\xa0No se puede generar el reporte por exceder la cantidad m\xe1xima de registros."]):this.notifService.unexpectedErrrorEmitted().next()})}onDownloadProviderReport(e){this.cobrosService.downloadProviderReportById(e).subscribe(t=>{const c=new Date,n=new Blob([t],{type:"application/octet-stream"}),o=window.URL.createObjectURL(n);var r=document.createElement("a");const i=c.getMonth()<10?"0"+(c.getMonth()+1):c.getMonth()+1;r.download=`proveedor_${e}_${c.getDate()}_${i}_${c.getFullYear()}.xlsx`,r.href=o,r.click(),r.remove()},e=>{console.log(e)})}onDelete(e){this.providerToDelete=e,this.confirmDeleteModal.onOpen(`\xbfEst\xe1s seguro que quieres eliminar el proveedor ${e.id}?`)}onEdit(e){return Object(De.a)(this,void 0,void 0,(function*(){const t=yield this.cobrosService.getProviderById(e.id).toPromise();this.addNewProviderModal.onOpenToEdit(t)}))}addNewProvider(){this.addNewProviderModal.onOpen()}onProviderAdded(e){this.cobrosService.addProvider(e).subscribe(e=>{this.addNewProviderModal.closeModal(),this.notifService.notificationEmitted().next(["success","Proveedor eliminado correctamente"]),this.getAllProviders()},e=>{console.log(e)})}onProviderEdited(e){this.cobrosService.updateProvider(e).subscribe(e=>{console.log(e),this.addNewProviderModal.closeModal(),this.notifService.notificationEmitted().next(["success","Proveedor editado correctamente"]),this.getAllProviders()},e=>{console.log(e)})}onConfirmDelete(){this.cobrosService.deleteProvider(this.providerToDelete.id).subscribe(e=>{this.getAllProviders(),this.confirmDeleteModal.closeModal(),this.providerToDelete=void 0,this.notifService.notificationEmitted().next(["success","Proveedor eliminado correctamente"])},e=>{this.notifService.unexpectedErrrorEmitted().next()})}ngOnDestroy(){this.subscriptionProvider.unsubscribe(),this.subscriptionDisplayName.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.Wb(E),i.Wb(U.a))},e.\u0275cmp=i.Qb({type:e,selectors:[["bo-providers"]],viewQuery:function(e,t){var c;1&e&&(i.Pc(Je,!0),i.Pc(He,!0)),2&e&&(i.Ic(c=i.pc())&&(t.addNewProviderModal=c.first),i.Ic(c=i.pc())&&(t.confirmDeleteModal=c.first))},decls:28,vars:10,consts:[[1,"container-fluid","ml-3"],[1,"title-container"],["canShow","","route","/gateway/proveedores/*",1,"btn","btn-sm","btn-primary","p-2","float-right",3,"click"],[1,"title"],["placement","right","ngbTooltip","Descargar reporte de proveedores",1,"download",3,"icon","click"],["class","spinner-container",4,"ngIf"],[1,"providers-container"],[1,"mb-0","mt-4","ml-0"],[1,"d-flex","justify-content-between"],[1,"filter"],["type","text","placeholder","Provider Id",1,"form-control",3,"ngModel","ngModelChange","keyup"],["class","clear-icon",3,"icon","click",4,"ngIf"],["type","text","placeholder","Display name",1,"form-control",3,"ngModel","ngModelChange","keyup"],[1,"custom-select",2,"width","auto",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"row"],["class","col-sm-12",4,"ngIf"],["class","mt-4 ",4,"ngIf"],[3,"addNewProvider","editProvider"],["providerModal",""],[3,"confirm"],["confirmDeleteModal",""],[1,"spinner-container"],[1,"spinner"],[1,"clear-icon",3,"icon","click"],[3,"ngValue"],[1,"col-sm-12"],[1,"table-responsive"],[1,"table","table-bordered","table-hover"],["scope","col"],["class","provider-row",3,"click",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","p-2"],[3,"collectionSize","page","pageSize","maxSize","boundaryLinks","pageChange"],[1,"provider-row",3,"click"],[1,"d-flex","justify-content-center"],["placement","top","ngbTooltip","Descargar reporte del proveedor",1,"action-icon","edit",3,"icon","click"],["canShow","","route","/gateway/proveedores/*","placement","top","ngbTooltip","Editar proveedor",1,"action-icon","edit",3,"icon","click"],["canShow","","route","/gateway/proveedores/*","placement","top","ngbTooltip","Eliminar proveedor",1,"action-icon","delete",3,"icon","click"],[1,"mt-4"],["type","info",1,"no-result"]],template:function(e,t){1&e&&(i.cc(0,"div",0),i.cc(1,"div",1),i.cc(2,"button",2),i.oc("click",(function(){return t.addNewProvider()})),i.Uc(3," Agregar proveedor "),i.bc(),i.cc(4,"h1",3),i.Uc(5,"Proveedores "),i.cc(6,"fa-icon",4),i.oc("click",(function(){return t.downloadReport()})),i.bc(),i.bc(),i.bc(),i.Sc(7,Ze,2,0,"div",5),i.cc(8,"div",6),i.cc(9,"div",7),i.cc(10,"div",8),i.cc(11,"div",9),i.cc(12,"input",10),i.oc("ngModelChange",(function(e){return t.providerId=e}))("keyup",(function(e){return t.onKeyUpProvider(e.target.value)})),i.bc(),i.Sc(13,et,1,1,"fa-icon",11),i.bc(),i.cc(14,"div",9),i.cc(15,"input",12),i.oc("ngModelChange",(function(e){return t.displayName=e}))("keyup",(function(e){return t.onKeyUpDisplay(e.target.value)})),i.bc(),i.Sc(16,tt,1,1,"fa-icon",11),i.bc(),i.cc(17,"div"),i.cc(18,"select",13),i.oc("ngModelChange",(function(e){return t.pageSize=e}))("ngModelChange",(function(){return t.refreshProviders(1)})),i.Sc(19,ct,3,2,"option",14),i.bc(),i.bc(),i.bc(),i.bc(),i.cc(20,"div",7),i.cc(21,"div",15),i.Sc(22,ot,15,6,"div",16),i.bc(),i.bc(),i.Sc(23,rt,3,0,"div",17),i.bc(),i.bc(),i.cc(24,"bo-add-provider",18,19),i.oc("addNewProvider",(function(e){return t.onProviderAdded(e)}))("editProvider",(function(e){return t.onProviderEdited(e)})),i.bc(),i.cc(26,"bo-confirm-modal",20,21),i.oc("confirm",(function(){return t.onConfirmDelete()})),i.bc()),2&e&&(i.Fb(6),i.zc("icon",t.faFileDownload),i.Fb(1),i.zc("ngIf",t.isLoading),i.Fb(5),i.zc("ngModel",t.providerId),i.Fb(1),i.zc("ngIf",t.providerId.length>0),i.Fb(2),i.zc("ngModel",t.displayName),i.Fb(1),i.zc("ngIf",t.displayName.length>0),i.Fb(2),i.zc("ngModel",t.pageSize),i.Fb(1),i.zc("ngForOf",t.itemsPerPage),i.Fb(3),i.zc("ngIf",!t.isLoading&&t.providers.length>0),i.Fb(1),i.zc("ngIf",0==(null==t.providers?null:t.providers.length)&&!t.isLoading))},directives:[T.a,o.a,s.i,r.n,D.b,D.n,D.p,D.t,r.m,Ye,k.a,D.q,D.v,s.g,s.a],styles:["h1[_ngcontent-%COMP%]{position:relative;display:inline-block}.providers-container[_ngcontent-%COMP%]{margin-top:4rem}.providers-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.providers-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{text-align:center}.providers-container[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]{position:relative}.providers-container[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:inline-block}.providers-container[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]   .clear-icon[_ngcontent-%COMP%]{cursor:pointer;position:absolute;top:10px;right:20px}.download[_ngcontent-%COMP%]{font-size:1.5rem;margin-left:20px;position:absolute;top:12px;cursor:pointer}.download[_ngcontent-%COMP%]:hover{color:#1890ff}.spinner-container[_ngcontent-%COMP%]{top:50%}  .no-result{margin-left:-15px;margin-top:20px}  .no-result button{display:none}.action-icon[_ngcontent-%COMP%]{cursor:pointer;margin-right:10px}.action-icon.edit[_ngcontent-%COMP%]:hover{color:#1890ff}.action-icon.delete[_ngcontent-%COMP%]:hover{color:#dc3545}"]}),e})();const st=["confirmStatusChangeModal"];function dt(e,t){if(1&e&&(i.cc(0,"span",18),i.Uc(1),i.bc()),2&e){const e=i.rc().$implicit;i.Fb(1),i.Wc(" Estado: ","START"==e.status?"Activado":"Desactivado"," ")}}const at=function(e,t){return{started:e,stopped:t}},lt=function(e,t){return{"btn-success":e,"btn-danger":t}};function pt(e,t){if(1&e){const e=i.dc();i.cc(0,"div",8),i.cc(1,"div",9),i.cc(2,"h3",10),i.Uc(3),i.bc(),i.cc(4,"h5",11),i.Uc(5),i.sc(6,"uppercase"),i.bc(),i.cc(7,"p",12),i.Uc(8),i.Xb(9,"br"),i.bc(),i.cc(10,"p",13),i.Sc(11,dt,2,1,"span",14),i.bc(),i.cc(12,"fa-icon",15),i.oc("click",(function(){i.Kc(e);const c=t.$implicit;return i.rc().onRefresh(c)})),i.bc(),i.cc(13,"div",16),i.cc(14,"button",17),i.oc("click",(function(){i.Kc(e);const c=t.$implicit;return i.rc().changeStatus(c)})),i.Uc(15),i.bc(),i.bc(),i.bc(),i.bc()}if(2&e){const e=t.$implicit,c=i.rc();i.Fb(3),i.Vc(e.name),i.Fb(2),i.Vc(i.tc(6,9,e.description)),i.Fb(3),i.Wc(" Ultima modificaci\xf3n de estado: ",e.dateTime," "),i.Fb(2),i.zc("ngClass",i.Ec(11,at,"START"==e.status,"STOP"==e.status)),i.Fb(1),i.zc("ngIf",1==!c.isRefreshing[e.description.toLowerCase()]),i.Fb(1),i.zc("icon",c.faSync)("spin",1==c.isRefreshing[e.description.toLowerCase()]),i.Fb(2),i.zc("ngClass",i.Ec(14,lt,"STOP"==e.status,"START"==e.status)),i.Fb(1),i.Wc(" ","START"==e.status?"Apagar":"Encender"," ")}}let ut=(()=>{class e{constructor(e,t){this.cobrosService=e,this.notifService=t,this.endpoints=[{name:"Gas Endpoint",description:"gas",dateTime:void 0,status:void 0},{name:"Unica Http Endpoint",description:"unica",dateTime:void 0,status:void 0}],this.isRefreshing={gas:!1,unica:!1},this.faSync=w.l}ngOnInit(){for(let e of this.endpoints)this.isRefreshing[e.description]=!0,this.cobrosService.getCobrosEndpointById(e.description).subscribe(t=>{this.isRefreshing[e.description]=!1,e.dateTime=t.dateTime,e.status=t.status},e=>{this.notifService.unexpectedErrrorEmitted().next()})}onRefresh(e){this.isRefreshing[e.description]=!0,this.cobrosService.getCobrosEndpointById(e.description).subscribe(t=>{setTimeout(()=>{this.isRefreshing[e.description]=!1},300),e.dateTime=t.dateTime,e.status=t.status},e=>{this.notifService.unexpectedErrrorEmitted().next()})}changeStatus(e){const t="STOP"==e.status?"start":"stop";this.confirmStatusChangeModal.onOpen(`\xbfEst\xe1s seguro que quieres ${"start"==t?"encender":"apagar"} ${e.name}?`),this.endpointToUpdate=e,this.actionToPerform=t}confirmStatusChange(){this.isRefreshing[this.endpointToUpdate.description]=!0,this.cobrosService.updateCobrosEndpointStatus(this.endpointToUpdate.description,this.actionToPerform).subscribe(e=>{this.onRefresh(this.endpointToUpdate),this.confirmStatusChangeModal.closeModal()},e=>{this.notifService.unexpectedErrrorEmitted().next()})}}return e.\u0275fac=function(t){return new(t||e)(i.Wb(E),i.Wb(U.a))},e.\u0275cmp=i.Qb({type:e,selectors:[["bo-components"]],viewQuery:function(e,t){var c;1&e&&i.Pc(st,!0),2&e&&i.Ic(c=i.pc())&&(t.confirmStatusChangeModal=c.first)},decls:10,vars:1,consts:[[1,"container-fluid","ml-3"],[1,"title-container"],[1,"title"],[1,"subtitle"],[1,"projects-container","mb-4"],["class","card",4,"ngFor","ngForOf"],[3,"confirm"],["confirmStatusChangeModal",""],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"card-subtitle"],[1,"card-text","mt-4"],[1,"status",3,"ngClass"],["class","mx-2",4,"ngIf"],[1,"refresh-icon",3,"icon","spin","click"],["canShow","","route","/gateway/*",1,"project-btn-container"],[1,"btn",3,"ngClass","click"],[1,"mx-2"]],template:function(e,t){1&e&&(i.cc(0,"div",0),i.cc(1,"div",1),i.cc(2,"h1",2),i.Uc(3,"Administraci\xf3n de Endpoints"),i.bc(),i.cc(4,"h3",3),i.Uc(5,"On/Off Endpoints"),i.bc(),i.bc(),i.cc(6,"div",4),i.Sc(7,pt,16,17,"div",5),i.bc(),i.bc(),i.cc(8,"bo-confirm-modal",6,7),i.oc("confirm",(function(){return t.confirmStatusChange()})),i.bc()),2&e&&(i.Fb(7),i.zc("ngForOf",t.endpoints))},directives:[r.m,k.a,r.l,r.n,o.a,T.a],pipes:[r.y],styles:[".title[_ngcontent-%COMP%]{font-size:32px;margin-right:15px}.subtitle[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{display:inline-block}.subtitle[_ngcontent-%COMP%]{font-style:italic;font-size:24px}.projects-container[_ngcontent-%COMP%]{left:0;right:0;margin-left:auto;margin-right:auto;text-align:center;display:grid;grid-template-columns:repeat(auto-fit,minmax(480px,.1fr));grid-gap:2rem}.card[_ngcontent-%COMP%]{width:480px;min-height:16rem;max-height:16rem}.card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-bottom:0}.card-text[_ngcontent-%COMP%]{font-size:14px}.refresh-icon[_ngcontent-%COMP%]{color:#4b555f;position:absolute;top:25px;right:15px;cursor:pointer}.status[_ngcontent-%COMP%]{font-weight:700}.started[_ngcontent-%COMP%]{color:#28a745}.stopped[_ngcontent-%COMP%]{color:#dc3545}"]}),e})();var gt=c("iInd"),bt=c("lDT9");const ht=[{path:"",pathMatch:"full",redirectTo:"componentes"},{path:"componentes",component:ut},{path:"proveedores",canActivate:[bt.a],component:it},{path:"productos",canActivate:[bt.a],component:Pe},{path:"transacciones",canActivate:[bt.a],component:Te},{path:"transacciones/:id",canActivate:[bt.a],component:y}];let mt=(()=>{class e{}return e.\u0275mod=i.Ub({type:e}),e.\u0275inj=i.Tb({factory:function(t){return new(t||e)},imports:[[gt.g.forChild(ht)],gt.g]}),e})(),ft=(()=>{class e{}return e.\u0275mod=i.Ub({type:e}),e.\u0275inj=i.Tb({factory:function(t){return new(t||e)},imports:[[r.c,mt,o.b,D.i,D.s,s.h,s.b,s.j,n.a,h]]}),e})()}}]);